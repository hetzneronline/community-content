---
SPDX-License-Identifier: MIT
path: "/tutorials/setup-scientific-Simulation"
slug: "tutorial-template"
date: "2025-02-13"
title: "Setting Up the Scientific N-Body Simulation 'AstroGen2'"
short_description: "This tutorial explains how to install and analyze the AstroGen2 simulation on a Linux server to study star formation in galaxies and galaxy interactions."
tags: ["Development", "Lang:Cmake", "Lang:C++", "Astro", "N-Nody", "Simulation", "Scientific"]
author: "Kimi Sickinger, Philip SpÃ¤th"
author_link: "https://github.com/Philip-Spaeth/AstroGen2"
author_img: "https://avatars.githubusercontent.com/u/142172237?s=48&v=4"
author_description: ""
language: "en"
available_languages: ["en", "Add other available languages using ISO 639-1 codes"]
header_img: "header-x"
cta: "product"
---

# Setting Up the Scientific N-Body Simulation "AstroGen2"

This tutorial explains how to install and analyze the AstroGen2 simulation on a Linux server to study star formation in galaxies and galaxy interactions.

## Requirements

Before starting, ensure your server meets the following requirements:

- **Operating System**: Linux (Ubuntu recommended)

## Installation

### Prerequisites

Before beginning, install the following software on your system:

- CMake (version 3.10 or higher)
- GCC (GNU Compiler Collection)

#### 1. Install CMake and GCC
```sh
sudo apt update
sudo apt install cmake gcc g++
```

### Cloning the Repository

Clone the repository to your local machine:
```sh
git clone https://github.com/Philip-Spaeth/AstroGen2.git
```

Navigate to the project directory:
```sh
cd AstroGen2/simulation
```

Build the project using CMake:
```sh
mkdir build
cd build
cmake ..
make
```

## Setting Up Galaxy Start Data

The initial conditions for galaxies must be stored in `AstroGen2/input_data/`.

Navigate to the input folder `AstroGen2/input_data/` and clone the `Example_ICs_AG2` repository:
```sh
cd AstroGen2/input_data/
git clone https://github.com/Philip-Spaeth/Example_ICs_AG2.git
```

## Configuring the Simulation

### 1. Customizing the Configuration File

Edit the configuration settings to define galaxy parameters and simulation settings:
```sh
nano AstroGen2/simulation/Config.ini
```

### 2. Updating the `inputPath`

Modify the `inputPath` parameter to select the input dataset. The base directory is `AstroGen2/input_data/`.

Example:
```ini
inputPath = Example_ICs_AG2/galIC/22k.dat
```

### 3. Updating the `inputDataFormat`

If you change the format of the input file, update the `inputDataFormat` parameter accordingly:

```ini
.dat -> gadget
.gal -> makeGal
.ag  -> ag
.agc -> agc
.age -> age
```

### 4. Defining the Number of Particles

Set the number of particles for the simulation with `numberOfParticles`. This value must not exceed the number of particles in the input file.

Additionally, configure `numParticlesOutput` to specify the number of particles saved after simulation.

## Running the Compiled Program

After building the project, execute the simulation:
```sh
cd AstroGen2/simulation/build/
./Astro_Genesis
```

---

<br>
<br>
<br>

# Analyzing the Simulation Results

## Requirements

- **Operating System**: Windows

## Setting Up AGRender for Analysis

### 1. Cloning the `AGRender` Repository
The `AGRender` program requires a separate directory named `output_data` in the same location to store rendering data.

```sh
|---- output_data
|
|---- AGRender
```

If you work with a wsl subsystem on windows you can clone the ```AGRender``` repo directy in the ```AstroGen2``` directory.
```sh
cd AstroGen2/
git clone https://github.com/Philip-Spaeth/AGRender.git
```

### 2. Using Pre-Built Binaries or Building from Source

#### **Recommended:** Use Pre-Built Binaries
```sh
cd pre_build
./galaxyPart.exe  or  ./type.exe
```

#### Build the Project with CMake
```sh
mkdir build
cd build
cmake ..
make
```

## Using AGRender

### 1. Selecting the `outputfolder`

### 2. Choosing Option 2 for Live Simulation View

### 3. Controlling AGRender

- **Mouse**: Rotate the view
- **Keyboard**: Move and interact with particles

```sh
w: move forward
s: move backward
d: move right
a: move left

L: Center on galaxy center

Ctrl: Move faster

Space: Start/stop simulation
Arrow Left: Slow down
Arrow Right: Speed up

Keys 1-9: Display specific particle types (gas, dark matter, etc.)
```

## Example Visualization

<video width="640" height="360" controls>
  <source src="images/andromeda-milkiway.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
