---
SPDX-License-Identifier: MIT
path: "/tutorials/automated-backups-with-borg-ui"
slug: "automated-backups-with-borg-ui"
date: "2026-01-31"
title: "Automated Server Backups with Borg UI and Hetzner Storage Box"
short_description: "Set up automated, encrypted backups of your Hetzner server to a Hetzner Storage Box using Borg UI - a modern web interface for Borg Backup"
tags: ["Backup", "Borg", "Docker", "Storage Box", "Monitoring"]
author: "Karan Hudia"
author_link: "https://github.com/karanhudia"
author_img: "https://avatars.githubusercontent.com/u/karanhudia"
author_description: "Full-stack developer and creator of Borg UI"
language: "en"
available_languages: ["en"]
header_img: "header-5"
cta: "storagebox"
---

## Introduction

Backing up your Hetzner server is crucial, but managing backups through command-line tools can be tedious. This tutorial shows you how to set up **Borg UI** - a modern web interface for [Borg Backup](https://borgbackup.readthedocs.io/) - to create automated, encrypted, and deduplicated backups of your Hetzner server to a Hetzner Storage Box.

**What you'll get:**
- Automated scheduled backups with one-click setup
- Web-based file browser to restore individual files
- Real-time backup progress monitoring
- Email/Slack/Discord notifications for backup status
- Prometheus metrics for Grafana dashboards
- Encrypted and deduplicated backups (saving storage space)

**Example scenario:** Daily automated backups of your web server to a Hetzner Storage Box, with email alerts and the ability to restore files through a web interface.

**Prerequisites**

* A Hetzner Cloud server or dedicated server running Ubuntu 22.04 or Debian 12 (other distros work too)
* A [Hetzner Storage Box](https://www.hetzner.com/storage/storage-box) (BX11 or higher recommended)
* Docker and Docker Compose installed on your server
* Root or sudo access to your server
* SSH access to your Storage Box enabled

**Time required:** 15-20 minutes

## Step 1 - Setting Up Your Hetzner Storage Box

First, we need to prepare your Hetzner Storage Box for backups.

### Step 1.1 - Enable SSH Access

1. Log in to [Hetzner Robot](https://robot.hetzner.com/)
2. Navigate to your Storage Box
3. Click on **"SSH support"** and enable it
4. Note down your SSH credentials:
   - **Host:** `uXXXXXX.your-storagebox.de` (e.g., `u123456.your-storagebox.de`)
   - **Username:** `uXXXXXX` (same as host prefix)
   - **Port:** `23` (Hetzner Storage Box SSH port)

### Step 1.2 - Test Storage Box Connection

From your Hetzner server, test the connection:

```bash
ssh -p 23 u123456@u123456.your-storagebox.de
```

If successful, you'll see a BusyBox shell. Type `exit` to disconnect.

**Tip:** If you get a host key verification prompt, type `yes` to accept it.

## Step 2 - Installing Borg UI on Your Server

We'll use Docker Compose for easy installation and management.

### Step 2.1 - Create Installation Directory

```bash
mkdir -p ~/borg-ui
cd ~/borg-ui
```

### Step 2.2 - Create Docker Compose Configuration

Create a `docker-compose.yml` file:

```bash
nano docker-compose.yml
```

Add the following configuration:

```yaml
version: '3.8'

services:
  borg-ui:
    image: ainullcode/borg-ui:latest
    container_name: borg-ui
    restart: unless-stopped
    ports:
      - "8081:8081"
    volumes:
      # Persistent data
      - borg_data:/data
      - borg_cache:/home/borg/.cache/borg

      # Directories to backup (customize these)
      - /var/www:/local/www:ro              # Website files
      - /etc:/local/etc:ro                  # Configuration files
      - /home:/local/home:rw                # User data
      - /opt:/local/opt:ro                  # Optional software

    environment:
      - TZ=Europe/Berlin                    # Change to your timezone
      - PUID=1000                           # Your user ID (run: id -u)
      - PGID=1000                           # Your group ID (run: id -g)

    # Required for mounting remote filesystems
    cap_add:
      - SYS_ADMIN
    devices:
      - /dev/fuse
    security_opt:
      - apparmor:unconfined

volumes:
  borg_data:
  borg_cache:
```

**Important customizations:**

1. **Volumes:** Adjust the volume mounts to match the directories you want to backup:
   - `- /var/www:/local/www:ro` backs up website files (read-only)
   - `- /home:/local/home:rw` backs up user data (read-write for restore)
   - Add more `-` lines for additional directories

2. **Timezone:** Change `TZ=Europe/Berlin` to your timezone

3. **User ID:** Run `id -u && id -g` to get your UID and GID, update PUID/PGID

**Security Note:** We use `:ro` (read-only) for directories that don't need write access during restore, and `:rw` (read-write) for directories where you might restore files.

### Step 2.3 - Start Borg UI

```bash
docker compose up -d
```

Verify it's running:

```bash
docker compose ps
```

You should see `borg-ui` with status `Up`.

### Step 2.4 - Access the Web Interface

Open your browser and navigate to:

```
http://your-server-ip:8081
```

**Default credentials:**
- Username: `admin`
- Password: `admin123`

**You'll be prompted to change the password on first login.** Choose a strong password!

## Step 3 - Configuring SSH Keys for Storage Box Access

Borg UI needs SSH key authentication to access your Storage Box securely.

### Step 3.1 - Generate SSH Key in Borg UI

1. In Borg UI, navigate to **Settings ‚Üí SSH Keys**
2. Click **"Generate New Key Pair"**
3. Fill in the details:
   - **Name:** `Hetzner Storage Box`
   - **Type:** `ed25519` (recommended, or RSA 4096 for older systems)
   - **Passphrase:** Leave empty (Storage Box doesn't support passphrase-protected keys)
4. Click **"Generate"**

### Step 3.2 - Copy the Public Key

1. In the SSH Keys list, click the **eye icon** next to your key
2. Copy the **Public Key** (starts with `ssh-ed25519` or `ssh-rsa`)

### Step 3.3 - Add Key to Storage Box

You have two options:

**Option A: Via Hetzner Robot (Recommended)**

1. Go to [Hetzner Robot](https://robot.hetzner.com/)
2. Navigate to your Storage Box
3. Click on **"SSH support"**
4. Paste your public key in the **"Public Key"** field
5. Click **"Save"**

**Option B: Via SSH**

```bash
# SSH into your Storage Box
ssh -p 23 u123456@u123456.your-storagebox.de

# Create .ssh directory if it doesn't exist
mkdir -p .ssh

# Add your public key
echo "ssh-ed25519 AAAA...your-key-here..." >> .ssh/authorized_keys

# Exit
exit
```

### Step 3.4 - Create SSH Connection in Borg UI

1. In Borg UI, go to **Settings ‚Üí SSH Connections**
2. Click **"Add SSH Connection"**
3. Fill in the details:
   - **Name:** `Hetzner Storage Box`
   - **Hostname:** `u123456.your-storagebox.de` (your Storage Box host)
   - **Port:** `23`
   - **Username:** `u123456` (your Storage Box username)
   - **SSH Key:** Select the key you created earlier
4. Click **"Save"**
5. Click **"Test Connection"** to verify it works

‚úÖ If the test succeeds, you're ready to create your first backup!

## Step 4 - Creating Your First Backup Repository

Now we'll create a Borg repository on your Storage Box.

### Step 4.1 - Create Repository

1. Navigate to **Repositories** in the sidebar
2. Click **"Create Repository"**
3. Configure the repository:

**Step 1: Repository Location**
   - **Name:** `Server Backups`
   - **Mode:** `Full Mode` (for creating backups)
   - **Storage Location:** Select `SSH Remote Storage`
   - **SSH Connection:** Select `Hetzner Storage Box`
   - **Repository Path:** `borg-backups` (will be created on Storage Box)

Click **"Next"**

**Step 2: Data Source**
   - **Backup From:** `Borg UI Server (Local)`
   - **Source Directories:** Add the directories you want to backup:
     - `/local/www` (your website files)
     - `/local/etc` (configuration files)
     - `/local/home` (user data)

   Click **"Next"**

**Step 3: Security**
   - **Encryption:** `repokey-blake2` (recommended - fast and secure)
   - **Passphrase:** Enter a strong passphrase (SAVE THIS! You can't recover backups without it)
   - **Confirm Passphrase:** Re-enter the same passphrase

Click **"Next"**

**Step 4: Backup Configuration**
   - **Compression:** `lz4` (fast) or `zstd,3` (better compression)
   - **Exclude Patterns:** Add patterns to exclude files:
     ```
     *.log
     *.tmp
     **/node_modules
     **/cache
     **/__pycache__
     ```

Click **"Next"**

**Step 5: Review**
   - Review your settings
   - Click **"Create Repository"**

‚è≥ This will initialize the repository on your Storage Box. It may take 30-60 seconds.

### Step 4.2 - Create Your First Backup

1. Once the repository is created, click on it in the Repositories list
2. Click **"Create Backup"** (lightning bolt icon)
3. Name your backup: `Initial Backup`
4. Click **"Start Backup"**

You'll see real-time progress with:
- Files processed
- Data uploaded
- Original vs. deduplicated size
- Transfer speed

‚è≥ The first backup will take longer as it uploads all data. Subsequent backups will be much faster due to deduplication.

## Step 5 - Setting Up Automated Scheduled Backups

Let's automate daily backups.

### Step 5.1 - Create Schedule

1. Navigate to **Schedule** in the sidebar
2. Click **"Create Scheduled Job"**
3. Configure:
   - **Job Type:** `Backup`
   - **Repository:** Select `Server Backups`
   - **Archive Name Pattern:** `{hostname}-{now:%Y-%m-%d}` (e.g., `server-2026-01-31`)
   - **Schedule:** Use the visual cron builder:
     - **Type:** Daily
     - **Time:** `02:00` (2 AM - low traffic time)
   - **Enabled:** ‚úÖ Check this box
4. Click **"Save"**

Your backups will now run automatically every day at 2 AM!

### Step 5.2 - Configure Retention Policy (Optional)

To automatically prune old backups and save space:

1. Click on your scheduled job
2. Scroll to **"Prune Options"**
3. Configure retention:
   ```
   --keep-daily=7      # Keep 7 daily backups
   --keep-weekly=4     # Keep 4 weekly backups
   --keep-monthly=6    # Keep 6 monthly backups
   ```
4. Enable **"Auto-prune after backup"**
5. Click **"Save"**

This keeps 7 days of daily backups, 4 weeks of weekly backups, and 6 months of monthly backups, automatically deleting older ones.

## Step 6 - Setting Up Notifications (Optional but Recommended)

Get notified when backups succeed or fail.

### Step 6.1 - Configure Email Notifications

1. Go to **Settings ‚Üí Notifications**
2. Click **"Add Notification Service"**
3. Select **"Email (SMTP)"**
4. Configure your email settings:

**Using Gmail:**
```
Service Name: Gmail Alerts
SMTP Host: smtp.gmail.com
SMTP Port: 587
TLS: ‚úÖ Enabled
Username: your-email@gmail.com
Password: [App Password - see note below]
From: your-email@gmail.com
To: your-email@gmail.com
```

**Gmail App Password:** You need to create an [App Password](https://support.google.com/accounts/answer/185833) instead of your regular password.

**Using Hetzner Mail (if you have Hetzner Mail):**
```
Service Name: Hetzner Mail
SMTP Host: mail.your-server.de
SMTP Port: 587
TLS: ‚úÖ Enabled
Username: your-email@your-domain.com
Password: your-email-password
From: your-email@your-domain.com
To: your-email@your-domain.com
```

5. Click **"Test Notification"** to verify it works
6. Enable **"Notify on Backup Success"** and **"Notify on Backup Failure"**
7. Click **"Save"**

### Step 6.2 - Other Notification Options

Borg UI supports 100+ notification services via [Apprise](https://github.com/caronc/apprise):

- **Discord:** Create a webhook and use `discord://webhook_id/webhook_token`
- **Slack:** Use webhook URL or Slack app
- **Telegram:** Create a bot and use `tgram://bot_token/chat_id`
- **Pushover:** Use `pover://user_key@token`

See [Borg UI Notifications Guide](https://karanhudia.github.io/borg-ui/notifications) for complete setup.

## Step 7 - Monitoring with Prometheus and Grafana (Advanced)

Borg UI includes a Prometheus metrics endpoint for monitoring.

### Step 7.1 - Access Metrics Endpoint

Metrics are available at:
```
http://your-server-ip:8081/metrics
```

Example metrics:
```
# Repository size in bytes
borg_repository_size_bytes{repository="Server Backups"} 5368709120

# Last backup success (1=success, 0=failure)
borg_backup_last_job_success{repository="Server Backups"} 1

# Time since last backup
borg_repository_last_backup_timestamp{repository="Server Backups"} 1738310400
```

### Step 7.2 - Configure Prometheus

If you have Prometheus running, add to `prometheus.yml`:

```yaml
scrape_configs:
  - job_name: 'borg-ui'
    static_configs:
      - targets: ['your-server-ip:8081']
    metrics_path: '/metrics'
    scrape_interval: 60s
```

### Step 7.3 - Grafana Dashboard (Optional)

Create alerts in Grafana:

```promql
# Alert if backup failed
borg_backup_last_job_success{repository="Server Backups"} == 0

# Alert if no backup in 25 hours
time() - borg_repository_last_backup_timestamp{repository="Server Backups"} > 90000

# Alert if repository size growing too fast
rate(borg_repository_size_bytes[1h]) > 1000000000  # 1GB/hour
```

See [Borg UI Metrics Documentation](https://karanhudia.github.io/borg-ui/metrics) for complete metric list.

## Step 8 - Restoring Files from Backup

When you need to restore files, Borg UI makes it easy.

### Step 8.1 - Browse Backup Archives

1. Navigate to **Repositories** ‚Üí **Server Backups**
2. Click on **"Archives"** tab
3. You'll see a list of all your backups with dates

### Step 8.2 - Browse Files in an Archive

1. Click on any archive (e.g., `server-2026-01-31`)
2. You'll see a file browser with your backed-up directories
3. Navigate to the file you want to restore

### Step 8.3 - Restore Individual Files

**Option A: Download Files**
1. Click the **download icon** next to a file
2. The file will download to your browser

**Option B: Restore to Original Location**
1. Select files/folders using checkboxes
2. Click **"Restore Selected"**
3. Choose destination:
   - **Original location:** Restores to same path
   - **Custom location:** Choose a different directory
4. Click **"Start Restore"**

‚è≥ Restore progress is shown in real-time.

### Step 8.4 - Restore Entire Archive (Full Restore)

If you need to restore everything:

1. Go to **Repositories** ‚Üí **Server Backups** ‚Üí **Archives**
2. Click the **three dots** menu next to an archive
3. Select **"Restore Archive"**
4. Choose destination path (e.g., `/local/restore`)
5. Click **"Start Restore"**

## Step 9 - Maintenance and Best Practices

### Step 9.1 - Monitor Backup Status

Check the **Dashboard** regularly:
- Recent backup status
- Repository sizes
- Storage usage trends
- Failed jobs (if any)

### Step 9.2 - Test Restores Regularly

**Important:** Test your backups by restoring files occasionally to ensure they work.

1. Once a month, restore a random file
2. Verify the content is correct
3. Delete the test restore

### Step 9.3 - Secure Your Installation

**Enable HTTPS with a reverse proxy (Recommended for production):**

If you want to access Borg UI over the internet, use a reverse proxy with SSL:

```bash
# Install Caddy (automatic HTTPS)
docker run -d \
  --name caddy \
  --restart unless-stopped \
  -p 80:80 -p 443:443 \
  -v caddy_data:/data \
  -v /etc/caddy/Caddyfile:/etc/caddy/Caddyfile \
  caddy:latest
```

Create `/etc/caddy/Caddyfile`:
```
backups.your-domain.com {
    reverse_proxy borg-ui:8081
}
```

Now access via `https://backups.your-domain.com` with automatic SSL.

### Step 9.4 - Backup Your Passphrase

**CRITICAL:** Store your repository passphrase in a safe place:

1. Write it down on paper (stored securely)
2. Use a password manager (1Password, Bitwarden, etc.)
3. Store it in a different location than your server

**Without the passphrase, your backups are UNRECOVERABLE!**

### Step 9.5 - Monitor Storage Box Usage

Check your Storage Box usage in [Hetzner Robot](https://robot.hetzner.com/):

- If you're approaching the limit, adjust retention policies
- Consider upgrading to a larger Storage Box
- Run manual prune jobs to free space: **Repositories ‚Üí Actions ‚Üí Prune**

## Step 10 - Troubleshooting

### Problem: "Connection refused" when accessing Borg UI

**Solution:**
```bash
# Check if container is running
docker compose ps

# Check logs
docker compose logs borg-ui

# Restart container
docker compose restart
```

### Problem: "Permission denied" errors during backup

**Solution:**

Check file permissions on mounted volumes:

```bash
# Find your user ID
id -u  # Should match PUID in docker-compose.yml

# Fix permissions if needed
sudo chown -R 1000:1000 ~/borg-ui
```

### Problem: SSH connection to Storage Box fails

**Solution:**

1. Test SSH connection manually:
   ```bash
   docker exec -it borg-ui ssh -p 23 u123456@u123456.your-storagebox.de
   ```

2. Check if public key is added to Storage Box:
   - Log in to [Hetzner Robot](https://robot.hetzner.com/)
   - Verify the key is in **SSH support ‚Üí Public Key**

3. Regenerate SSH key in Borg UI if needed

### Problem: Backups are very slow

**Solutions:**

1. **Use faster compression:** Change to `lz4` (faster) or `none` (no compression)
2. **Check network speed:** Run `speedtest-cli` on your server
3. **Exclude large unnecessary files:** Add patterns like `*.log`, `*.tmp`, `**/__pycache__`
4. **Use deduplication:** Subsequent backups will be faster due to Borg's deduplication

### Problem: "Repository not found" error

**Solution:**

1. Verify the repository path on Storage Box:
   ```bash
   ssh -p 23 u123456@u123456.your-storagebox.de ls -la
   ```

2. Check if the repository was created successfully:
   - Go to **Repositories** in Borg UI
   - Look for any error messages

3. Try recreating the repository with the correct path

### Problem: Out of space on Storage Box

**Solution:**

1. Check current usage in [Hetzner Robot](https://robot.hetzner.com/)

2. Run a prune job to delete old backups:
   - **Repositories ‚Üí Actions ‚Üí Prune**
   - Or manually delete old archives

3. Adjust retention policy to keep fewer backups

4. Consider upgrading your Storage Box

## Conclusion

You now have a fully automated backup system with:

‚úÖ Encrypted backups to Hetzner Storage Box
‚úÖ Daily automated backups at 2 AM
‚úÖ Email/Slack/Discord notifications
‚úÖ Web-based file browser for easy restores
‚úÖ Prometheus metrics for monitoring
‚úÖ Automatic retention policy (7 daily, 4 weekly, 6 monthly)

**Your backups are:**
- **Encrypted:** AES-256 encryption with your passphrase
- **Deduplicated:** Only changed data is uploaded (saves bandwidth and storage)
- **Compressed:** Reduces storage usage
- **Automated:** Set it and forget it

**Next steps:**

1. Monitor your first few scheduled backups
2. Test restoring a file to ensure everything works
3. Join the [Borg UI Discord](https://discord.gg/afjM9vMj) for support and updates
4. Consider setting up additional repositories for different data types

**Useful resources:**

- [Borg UI Documentation](https://karanhudia.github.io/borg-ui)
- [Borg Backup Documentation](https://borgbackup.readthedocs.io/)
- [Hetzner Storage Box Docs](https://docs.hetzner.com/robot/storage-box)
- [Borg UI GitHub](https://github.com/karanhudia/borg-ui)

**Questions or issues?**
- [GitHub Issues](https://github.com/karanhudia/borg-ui/issues)
- [Discord Community](https://discord.gg/afjM9vMj)

Happy backing up! üöÄ

##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Karan Hudia <karan.hudia@omio.com>

-->
