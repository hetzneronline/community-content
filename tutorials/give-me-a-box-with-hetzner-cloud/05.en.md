## Step 5 - Managing Your Instances

GMAB provides commands to help you manage your temporary instances.

### Listing All Instances

To view all your active Hetzner instances:

```bash
gmab list -p hetzner
```

Example output:

```
Provider    Instance ID            Label                IP Address        Status              Region        Image                     Time Left
=====================================================================================================================
hetzner     12345678              gmab-abc123def456    192.168.1.100    running             nbg1          ubuntu-22.04              45m
hetzner     98765432              gmab-ghi789jkl012    10.0.0.100       running             hel1          ubuntu-22.04              15m
hetzner     56781234              gmab-mno345pqr678    10.0.2.200       running (expired)   fsn1          debian-11                 expired
```

The `Time Left` column shows how much time remains before the instance is considered expired.

### Understanding the Expiration Mechanism

A key feature of GMAB is its expiration mechanism. Here's how it works:

1. When you spawn an instance, you specify a lifetime in minutes (default is 60)
2. GMAB tracks this lifetime and marks instances as "expired" once the time is up
3. **Important: GMAB does NOT automatically terminate expired instances**
4. You must explicitly run a command to terminate expired instances

This design gives you control over when instances are actually terminated, preventing unexpected disruptions while you're still using them.

### Terminating Instances

To terminate a specific instance:

```bash
gmab terminate 12345678  # Using Instance ID
```

Or:

```bash
gmab terminate gmab-abc123def456  # Using Label
```

To terminate multiple instances at once:

```bash
gmab terminate 12345678 98765432
```

#### Terminating All Instances

To terminate all your Hetzner instances:

```bash
gmab terminate all -p hetzner
```

You'll be prompted for confirmation:

```
The following instances will be terminated:
- 12345678 (hetzner: gmab-abc123def456)
- 98765432 (hetzner: gmab-ghi789jkl012)
- 56781234 (hetzner: gmab-mno345pqr678)
Do you want to proceed? [y/N]: 
```

#### Terminating Expired Instances

The most common cleanup task is terminating expired instances:

```bash
gmab terminate expired -p hetzner
```

Again, you'll see a confirmation prompt:

```
The following expired instances will be terminated:
- 56781234 (hetzner: gmab-mno345pqr678)
Do you want to proceed? [y/N]: 
```

#### Using the -y Flag for Automated Cleanup

For scripts or automated tasks, you can use the `-y` flag to bypass confirmation prompts:

```bash
gmab terminate expired -p hetzner -y
```

This is particularly useful for scheduled cleanup jobs, as we'll see in the next section.