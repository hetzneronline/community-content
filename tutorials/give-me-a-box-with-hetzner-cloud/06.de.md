## Schritt 6 - Automatisieren der Bereinigung

Da GMAB abgelaufene Instanzen nicht automatisch beendet, ist es sinnvoll, eine geplante Bereinigung einzurichten, um unnötige Kosten zu vermeiden.

### Einrichten eines Cron-Jobs (Linux/macOS)

1. Öffnen Sie Ihre crontab-Datei:

```bash
crontab -e
```

2. Fügen Sie eine Zeile hinzu, um den Bereinigungsbefehl regelmäßig auszuführen:

```
# Jede Stunde abgelaufene Instanzen bereinigen
0 * * * * gmab terminate expired -y
```

Dieser Job läuft jede Stunde zur vollen Stunde. Für eine weniger häufige Bereinigung:

```
# Täglich um Mitternacht ausführen
0 0 * * * gmab terminate expired -y
```

### Verwendung des Windows Task Schedulers

Unter Windows können Sie den Task Scheduler nutzen:

1. Erstellen Sie eine Batch-Datei (z.B. `gmab-cleanup.bat`) mit folgendem Inhalt:

```bat
@echo off
gmab terminate expired -y
```

2. Öffnen Sie den Task Scheduler und erstellen Sie eine neue Basisaufgabe
3. Legen Sie fest, dass die Aufgabe nach einem Zeitplan ausgeführt wird (z.B. täglich oder stündlich)
4. Wählen Sie als Aktion die erstellte Batch-Datei aus

## Schritt 7 - Praktische Anwendungsbeispiele

Hier sind einige konkrete Beispiele für den Einsatz von GMAB mit Hetzner Cloud.

### Beispiel 1: Schneller Sicherheitstest

Benötigen Sie einen Sicherheitsscan von einer externen IP aus?

```bash
# Erstellen Sie eine Box mit 30 Minuten Lebensdauer
gmab spawn -p hetzner -t 30

# SSH-Verbindung zur Box herstellen
ssh root@<ip-adresse>

# Führen Sie Ihre Sicherheitstools aus
# ...

# Wenn Sie fertig sind, beenden Sie die Instanz
gmab terminate <instanz-id>
```

### Beispiel 2: Regionsspezifische Tests

Testen Sie, wie Ihre Website aus verschiedenen Regionen erscheint:

```bash
# Instanzen in verschiedenen Regionen erstellen
gmab spawn -p hetzner -r nbg1 -t 60
gmab spawn -p hetzner -r hel1 -t 60
gmab spawn -p hetzner -r ash -t 60

# Führen Sie Ihre Tests von jeder Instanz aus
# ...

# Aufräumen, wenn Sie fertig sind
gmab terminate all -p hetzner -y
```

### Beispiel 3: Geplante Aufgaben

Führen Sie regelmäßige Jobs aus, ohne den lokalen Rechner eingeschaltet zu lassen:

```bash
# Erstellen Sie eine Box mit längerer Lebensdauer
gmab spawn -p hetzner -t 1440  # 24 Stunden

# Richten Sie Ihren geplanten Job auf der Instanz ein
# ...

# Manuell beenden, wenn Sie fertig sind
gmab terminate <instanz-id>
```