---
SPDX-License-Identifier: MIT
path: "/tutorials/give-me-a-box-with-hetzner-cloud"
slug: "give-me-a-box-with-hetzner-cloud"
title: "Using GMAB to Manage Temporary Hetzner Cloud Instances"
short_description: "Learn how to install and use GMAB to efficiently spawn, manage, and terminate temporary Hetzner Cloud instances."
tags: [
    "hetzner",
    "cloud",
    "cli",
    "python",
    "automation"
]
author: "Your Name"
author_link: ""
author_img: ""
author_description: ""
language: "en"
available_languages: ["en"]
header_img: "header-6"
cta: "cloud"
---

## Introduction

Sometimes you need a quick cloud server for a temporary task - maybe for testing from a different IP address, running a short computational job, or setting up a temporary development environment. Manually creating and managing these temporary servers through cloud provider UIs can become tedious and error-prone.

This is where GMAB (Give Me A Box) comes in. GMAB is a command-line tool that makes it easy to spawn, manage, and clean up temporary cloud instances across multiple providers, including Hetzner Cloud. The tool is particularly useful for:

- Bug bounty hunting from different IP addresses
- Web scraping or testing from various regions
- Running temporary workloads without manual cleanup
- Development environments that don't need to persist
- Quick access to computational resources in different geographic locations

In this tutorial, we'll focus on using GMAB with Hetzner Cloud, covering everything from installation and configuration to daily usage patterns.

## Prerequisites

Before getting started with GMAB, you'll need:

* A Hetzner Cloud account
* Python 3.7 or higher installed on your local machine
* Pip (Python package manager)
* An SSH key pair (ed25519 recommended)

## Step 1 - Installing GMAB

GMAB can be installed directly from PyPI (Python Package Index) using pip. Open your terminal and run one of the following commands:

For a system-wide installation:

```bash
pip install gmab
```

For a user-specific installation (without admin privileges):

```bash
pip install --user gmab
```

After installation, verify that GMAB installed correctly:

```bash
gmab --help
```

You should see the help menu displaying the available commands and options.

## Step 2 - Setting Up Hetzner Cloud Project and API Token

Before configuring GMAB, you need to set up Hetzner Cloud appropriately by creating a dedicated project and generating an API token.

### Creating a Dedicated Project

1. Log in to your Hetzner Cloud Console at [https://console.hetzner.cloud/](https://console.hetzner.cloud/)

2. Click the "NEW PROJECT" button in the top right corner

   [THIS IS FIGURE: Screenshot showing the Hetzner Cloud Console with the New Project button highlighted]

3. Name your project "gmab" (or another name of your choice)

   [THIS IS FIGURE: Screenshot showing the Create Project dialog with "gmab" entered as project name]

4. Click "CREATE & OPEN" to create and switch to the new project

### Generating an API Token

1. In your project dashboard, click on "Security" in the left sidebar

   [THIS IS FIGURE: Screenshot showing the Security menu in the left sidebar]

2. In the "API Tokens" section, click "CREATE API TOKEN"

   [THIS IS FIGURE: Screenshot showing the Create API Token button]

3. Enter a descriptive name like "GMAB Access" and select "Read & Write" permissions

   [THIS IS FIGURE: Screenshot showing the API token creation form with permissions selection]

4. Click "CREATE API TOKEN"

5. **IMPORTANT**: Copy and save the displayed API token securely. This is the only time you will see this token. If lost, you'll need to generate a new one.

   [THIS IS FIGURE: Screenshot showing the API token display dialog]

## Step 3 - Configuring GMAB

Now that you have your Hetzner Cloud project and API token, you can configure GMAB for use with Hetzner Cloud.

### Initial Configuration

Run the configuration wizard:

```bash
gmab configure
```

The tool will guide you through an interactive configuration process. When prompted to configure Hetzner, select "y" and enter your API token:

```
$ gmab configure
Using config directory: /home/user/.config/gmab

Configuring general settings:
SSH public key path [~/.ssh/id_ed25519.pub]: 
Default instance lifetime (minutes) [60]: 
Default provider (linode, aws, hetzner) [linode]: hetzner

Do you want to configure linode? [Y/n]: n

Do you want to configure aws? [Y/n]: n

Do you want to configure hetzner? [Y/n]: y

Configuring hetzner provider:
API Key: your-hetzner-api-token-here
Default region [nbg1]: 
Default instance type [cpx11]: 
Default image [ubuntu-22.04]: 

Configuration completed successfully!
```

### Understanding Configuration Options

During configuration, you'll have several options to customize:

#### SSH Key Path
This is the path to your public SSH key that will be uploaded to each new instance, allowing you to connect to it securely. The default location is `~/.ssh/id_ed25519.pub`, but you can specify a different key if needed.

#### Default Lifetime
The default lifetime in minutes before instances are considered "expired." The default is 60 minutes, but you can set this higher or lower based on your typical usage patterns.

#### Default Region
Hetzner Cloud has several regions available:

- `nbg1` - Nuremberg, Germany
- `fsn1` - Falkenstein, Germany
- `hel1` - Helsinki, Finland
- `ash` - Ashburn, Virginia, USA

If you frequently work with a particular region, set it as your default.

#### Default Instance Type
Hetzner offers various instance types. Some common ones include:

- `cpx11` - 2 vCPU, 2 GB RAM (default in GMAB)
- `cpx21` - 3 vCPU, 4 GB RAM
- `cpx31` - 4 vCPU, 8 GB RAM
- `cx11` - 1 vCPU, 2 GB RAM
- `cx21` - 2 vCPU, 4 GB RAM

## Step 4 - Creating Your First Instance

Now that GMAB is configured, let's create your first Hetzner Cloud instance.

### Basic Instance Creation

To spawn a Hetzner Cloud instance using your default settings:

```bash
gmab spawn
```

If Hetzner is not your default provider, specify it with the `-p` flag:

```bash
gmab spawn -p hetzner
```

You'll see output similar to this:

```
Spawned 'hetzner' instance:
  ID: 12345678
  Label: gmab-abc123def456
  IP: 192.168.1.100
  Connect via: ssh root@192.168.1.100
```

### Customizing Your Instance

GMAB allows you to override defaults when spawning an instance:

```bash
# Specify a different region
gmab spawn -p hetzner -r hel1

# Specify a different image
gmab spawn -p hetzner -i ubuntu-20.04

# Specify instance lifetime (in minutes)
gmab spawn -p hetzner -t 120  # 2 hour lifetime

# Combine options
gmab spawn -p hetzner -r fsn1 -i debian-11 -t 180
```

### Connecting to Your Instance

Once the instance is running, connect to it using SSH:

```bash
ssh root@<ip_address>
```

Replace `<ip_address>` with the IP address shown in the spawn output.

## Step 5 - Managing Your Instances

GMAB provides commands to help you manage your temporary instances.

### Listing All Instances

To view all your active Hetzner instances:

```bash
gmab list -p hetzner
```

Example output:

```
Provider    Instance ID            Label                IP Address        Status              Region        Image                     Time Left
=====================================================================================================================
hetzner     12345678              gmab-abc123def456    192.168.1.100    running             nbg1          ubuntu-22.04              45m
hetzner     98765432              gmab-ghi789jkl012    10.0.0.100       running             hel1          ubuntu-22.04              15m
hetzner     56781234              gmab-mno345pqr678    10.0.2.200       running (expired)   fsn1          debian-11                 expired
```

The `Time Left` column shows how much time remains before the instance is considered expired.

### Understanding the Expiration Mechanism

A key feature of GMAB is its expiration mechanism. Here's how it works:

1. When you spawn an instance, you specify a lifetime in minutes (default is 60)
2. GMAB tracks this lifetime and marks instances as "expired" once the time is up
3. **Important: GMAB does NOT automatically terminate expired instances**
4. You must explicitly run a command to terminate expired instances

This design gives you control over when instances are actually terminated, preventing unexpected disruptions while you're still using them.

### Terminating Instances

To terminate a specific instance:

```bash
gmab terminate 12345678  # Using Instance ID
```

Or:

```bash
gmab terminate gmab-abc123def456  # Using Label
```

To terminate multiple instances at once:

```bash
gmab terminate 12345678 98765432
```

#### Terminating All Instances

To terminate all your Hetzner instances:

```bash
gmab terminate all -p hetzner
```

You'll be prompted for confirmation:

```
The following instances will be terminated:
- 12345678 (hetzner: gmab-abc123def456)
- 98765432 (hetzner: gmab-ghi789jkl012)
- 56781234 (hetzner: gmab-mno345pqr678)
Do you want to proceed? [y/N]: 
```

#### Terminating Expired Instances

The most common cleanup task is terminating expired instances:

```bash
gmab terminate expired -p hetzner
```

Again, you'll see a confirmation prompt:

```
The following expired instances will be terminated:
- 56781234 (hetzner: gmab-mno345pqr678)
Do you want to proceed? [y/N]: 
```

#### Using the -y Flag for Automated Cleanup

For scripts or automated tasks, you can use the `-y` flag to bypass confirmation prompts:

```bash
gmab terminate expired -p hetzner -y
```

This is particularly useful for scheduled cleanup jobs, as we'll see in the next section.

## Step 6 - Automating Cleanup

Since GMAB doesn't automatically terminate expired instances, you can set up scheduled cleanup to prevent accumulating unnecessary costs.

### Setting Up a Cron Job (Linux/macOS)

1. Open your crontab file:

```bash
crontab -e
```

2. Add a line to run the cleanup command periodically:

```
# Run every hour to clean up expired instances
0 * * * * gmab terminate expired -y
```

This will run every hour on the hour. For less frequent cleanup:

```
# Run daily at midnight
0 0 * * * gmab terminate expired -y
```

### Using Windows Task Scheduler

On Windows, you can use Task Scheduler:

1. Create a batch file (e.g., `gmab-cleanup.bat`) with:

```bat
@echo off
gmab terminate expired -y
```

2. Open Task Scheduler and create a new Basic Task
3. Set the trigger to run on a schedule (e.g., daily or hourly)
4. Point the action to the batch file you created

## Step 7 - Practical Usage Examples

Here are some practical examples of how to use GMAB with Hetzner Cloud.

### Example 1: Quick Security Testing

Need to run a security scan from an external IP?

```bash
# Spawn a box with a 30-minute lifetime
gmab spawn -p hetzner -t 30

# SSH into the box
ssh root@<ip_address>

# Run your security tools
# ...

# When finished, terminate the instance
gmab terminate <instance_id>
```

### Example 2: Region-Specific Testing

Testing how your website appears from different regions:

```bash
# Spawn instances in different regions
gmab spawn -p hetzner -r nbg1 -t 60
gmab spawn -p hetzner -r hel1 -t 60
gmab spawn -p hetzner -r ash -t 60

# Run your tests from each instance
# ...

# Clean up when done
gmab terminate all -p hetzner -y
```

### Example 3: Scheduled Tasks

Running periodic jobs without keeping your local machine on:

```bash
# Spawn a box with longer lifetime
gmab spawn -p hetzner -t 1440  # 24 hours

# Set up your scheduled job on the instance
# ...

# Manually terminate when done
gmab terminate <instance_id>
```

## Troubleshooting

### Common Issues

#### "Provider 'hetzner' is not configured"

Run `gmab configure -p hetzner` to set up your Hetzner credentials.

#### "Failed to create server: Invalid API token"

Your Hetzner API token is invalid or has expired. Generate a new token and update your configuration.

#### Instance shows as "expired" but still running

This is normal behavior. Expired instances continue running until explicitly terminated.

#### "SSH key not found"

Check the path to your SSH public key in the GMAB configuration:

```bash
gmab configure --print
```

Update if necessary:

```bash
gmab configure -p hetzner
```

## Best Practices

### Use Meaningful Lifetimes

Set reasonable expiration times based on your actual needs:

```bash
# For quick tests (30 minutes)
gmab spawn -p hetzner -t 30
   
# For longer running tasks (4 hours)
gmab spawn -p hetzner -t 240
```

### Regular Cleanup

Either:
- Set up a cron job to run `gmab terminate expired -y` regularly
- Make it a habit to run cleanup manually at the end of your work session

### Security Recommendations

- Create a dedicated Hetzner project specifically for GMAB
- Use an API token with appropriate permissions
- Rotate your Hetzner API tokens periodically
- Store configuration files securely

### Regional Selection

Choose regions close to your target audience or workload for better performance.

## Conclusion

GMAB with Hetzner Cloud provides an efficient way to deploy temporary instances for various use cases. The expiration mechanism helps you keep track of resources without forcing immediate termination, giving you flexibility while helping to avoid unexpected costs.

Key takeaways:
- Instances are marked as "expired" after their lifetime elapses but continue running
- You must explicitly terminate instances with `gmab terminate`
- The `-y` flag skips confirmation prompts, useful for automated cleanup
- Setting up a cron job for regular cleanup is highly recommended

With this knowledge, you can efficiently use GMAB to manage temporary Hetzner Cloud instances for your projects, tests, and workflows.

##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Steve Cannivy <steve@roudeleiw.lu>

-->