---
SPDX-License-Identifier: MIT
path: "/tutorials/give-me-a-box-with-hetzner-cloud"
slug: "give-me-a-box-with-hetzner-cloud"
title: "Verwendung von GMAB zur Verwaltung temporärer Hetzner Cloud Instanzen"
short_description: "Lernen Sie, wie Sie GMAB installieren und verwenden, um temporäre Hetzner Cloud Instanzen effizient zu erstellen, zu verwalten und zu beenden."
tags: [
    "hetzner",
    "cloud",
    "cli",
    "python",
    "automation"
]
author: "Your Name"
author_link: ""
author_img: ""
author_description: ""
language: "de"
available_languages: ["en", "de"]
header_img: "header-6"
cta: "cloud"
---

## Einführung

Manchmal benötigt man einen schnellen Cloud-Server für eine temporäre Aufgabe - vielleicht für Tests von einer anderen IP-Adresse aus, für kurze Rechenaufgaben oder zum Einrichten einer temporären Entwicklungsumgebung. Das manuelle Erstellen und Verwalten dieser temporären Server über die Benutzeroberflächen von Cloud-Anbietern kann mühsam und fehleranfällig werden.

Hier kommt GMAB (Give Me A Box) ins Spiel. GMAB ist ein Kommandozeilen-Tool, das es einfach macht, temporäre Cloud-Instanzen bei verschiedenen Anbietern, einschließlich Hetzner Cloud, zu erstellen, zu verwalten und zu bereinigen. Das Tool ist besonders nützlich für:

- Bug Bounty Hunting von verschiedenen IP-Adressen aus
- Web Scraping oder Tests aus verschiedenen Regionen
- Ausführen temporärer Workloads ohne manuelle Bereinigung
- Entwicklungsumgebungen, die nicht dauerhaft bestehen müssen
- Schneller Zugriff auf Rechenressourcen in verschiedenen geografischen Standorten

In diesem Tutorial konzentrieren wir uns auf die Verwendung von GMAB mit Hetzner Cloud und behandeln alles von der Installation und Konfiguration bis hin zu täglichen Nutzungsmustern.

## Voraussetzungen

Bevor Sie mit GMAB beginnen können, benötigen Sie:

* Ein Hetzner Cloud Konto
* Python 3.7 oder höher auf Ihrem lokalen Rechner
* Pip (Python-Paketmanager)
* Ein SSH-Schlüsselpaar (ed25519 empfohlen)

## Schritt 1 - Installation von GMAB

GMAB kann direkt von PyPI (Python Package Index) mit pip installiert werden. Öffnen Sie Ihr Terminal und führen Sie einen der folgenden Befehle aus:

Für eine systemweite Installation:

```bash
pip install gmab
```

Für eine benutzerspezifische Installation (ohne Administratorrechte):

```bash
pip install --user gmab
```

Überprüfen Sie nach der Installation, ob GMAB korrekt installiert wurde:

```bash
gmab --help
```

Sie sollten das Hilfemenü mit den verfügbaren Befehlen und Optionen sehen.

## Schritt 2 - Einrichtung eines Hetzner Cloud Projekts und API-Tokens

Bevor Sie GMAB konfigurieren, müssen Sie Hetzner Cloud entsprechend einrichten, indem Sie ein dediziertes Projekt erstellen und ein API-Token generieren.

### Erstellen eines dedizierten Projekts

1. Melden Sie sich in Ihrer Hetzner Cloud Console an unter [https://console.hetzner.cloud/](https://console.hetzner.cloud/)

2. Klicken Sie auf die Schaltfläche "NEUES PROJEKT" in der oberen rechten Ecke

   [HIER ABBILDUNG: Screenshot, der die Hetzner Cloud-Konsole mit hervorgehobener Schaltfläche "Neues Projekt" zeigt]

3. Nennen Sie Ihr Projekt "gmab" (oder einen anderen Namen Ihrer Wahl)

   [HIER ABBILDUNG: Screenshot, der den Dialog "Projekt erstellen" mit "gmab" als eingegebenem Projektnamen zeigt]

4. Klicken Sie auf "ERSTELLEN & ÖFFNEN", um das Projekt zu erstellen und zu öffnen

### Generieren eines API-Tokens

1. Klicken Sie in Ihrem Projekt-Dashboard auf "Sicherheit" in der linken Seitenleiste

   [HIER ABBILDUNG: Screenshot, der das Sicherheitsmenü in der linken Seitenleiste zeigt]

2. Klicken Sie im Bereich "API-Tokens" auf "API-TOKEN ERSTELLEN"

   [HIER ABBILDUNG: Screenshot, der die Schaltfläche "API-Token erstellen" zeigt]

3. Geben Sie einen aussagekräftigen Namen wie "GMAB Zugriff" ein und wählen Sie "Lesen & Schreiben" als Berechtigung

   [HIER ABBILDUNG: Screenshot, der das Formular zur API-Token-Erstellung mit Berechtigungsauswahl zeigt]

4. Klicken Sie auf "API-TOKEN ERSTELLEN"

5. **WICHTIG**: Kopieren und speichern Sie das angezeigte API-Token sicher. Dies ist das einzige Mal, dass Sie dieses Token sehen werden. Bei Verlust müssen Sie ein neues generieren.

   [HIER ABBILDUNG: Screenshot, der den Dialog zur Anzeige des API-Tokens zeigt]

## Schritt 3 - Konfiguration von GMAB

Nachdem Sie Ihr Hetzner Cloud Projekt und API-Token haben, können Sie GMAB für die Verwendung mit Hetzner Cloud konfigurieren.

### Erste Konfiguration

Führen Sie den Konfigurationsassistenten aus:

```bash
gmab configure
```

Das Tool führt Sie durch einen interaktiven Konfigurationsprozess. Wenn Sie aufgefordert werden, Hetzner zu konfigurieren, wählen Sie "y" und geben Sie Ihr API-Token ein:

```
$ gmab configure
Verwende Konfigurationsverzeichnis: /home/user/.config/gmab

Konfiguriere allgemeine Einstellungen:
SSH-Public-Key-Pfad [~/.ssh/id_ed25519.pub]: 
Standard-Lebensdauer (Minuten) [60]: 
Standard-Anbieter (linode, aws, hetzner) [linode]: hetzner

Möchten Sie linode konfigurieren? [J/n]: n

Möchten Sie aws konfigurieren? [J/n]: n

Möchten Sie hetzner konfigurieren? [J/n]: j

Konfiguriere hetzner-Anbieter:
API-Schlüssel: Ihr-Hetzner-API-Token-hier
Standard-Region [nbg1]: 
Standard-Instanztyp [cpx11]: 
Standard-Image [ubuntu-22.04]: 

Konfiguration erfolgreich abgeschlossen!
```

### Konfigurationsoptionen verstehen

Während der Konfiguration haben Sie mehrere Anpassungsmöglichkeiten:

#### SSH-Schlüssel-Pfad
Dies ist der Pfad zu Ihrem öffentlichen SSH-Schlüssel, der auf jede neue Instanz hochgeladen wird, damit Sie eine sichere Verbindung herstellen können. Der Standardspeicherort ist `~/.ssh/id_ed25519.pub`, Sie können jedoch einen anderen Schlüssel angeben, wenn nötig.

#### Standard-Lebensdauer
Die Standard-Lebensdauer in Minuten, bevor Instanzen als "abgelaufen" betrachtet werden. Der Standardwert beträgt 60 Minuten, Sie können diesen Wert jedoch basierend auf Ihren typischen Nutzungsmustern höher oder niedriger einstellen.

#### Standard-Region
Hetzner Cloud verfügt über mehrere verfügbare Regionen:

- `nbg1` - Nürnberg, Deutschland
- `fsn1` - Falkenstein, Deutschland
- `hel1` - Helsinki, Finnland
- `ash` - Ashburn, Virginia, USA

Wenn Sie häufig mit einer bestimmten Region arbeiten, stellen Sie diese als Standard ein.

#### Standard-Instanztyp
Hetzner bietet verschiedene Instanztypen an. Einige gängige Typen sind:

- `cpx11` - 2 vCPU, 2 GB RAM (Standard in GMAB)
- `cpx21` - 3 vCPU, 4 GB RAM
- `cpx31` - 4 vCPU, 8 GB RAM
- `cx11` - 1 vCPU, 2 GB RAM
- `cx21` - 2 vCPU, 4 GB RAM

## Schritt 4 - Erstellen Ihrer ersten Instanz

Nachdem GMAB konfiguriert ist, erstellen wir Ihre erste Hetzner Cloud Instanz.

### Grundlegende Instanzerstellung

Um eine Hetzner Cloud Instanz mit Ihren Standardeinstellungen zu erstellen:

```bash
gmab spawn
```

Wenn Hetzner nicht Ihr Standard-Anbieter ist, geben Sie ihn mit dem Flag `-p` an:

```bash
gmab spawn -p hetzner
```

Sie werden eine Ausgabe ähnlich dieser sehen:

```
Spawned 'hetzner' instance:
  ID: 12345678
  Label: gmab-abc123def456
  IP: 192.168.1.100
  Connect via: ssh root@192.168.1.100
```

### Anpassen Ihrer Instanz

GMAB ermöglicht es Ihnen, Standardwerte beim Erstellen einer Instanz zu überschreiben:

```bash
# Eine andere Region angeben
gmab spawn -p hetzner -r hel1

# Ein anderes Image angeben
gmab spawn -p hetzner -i ubuntu-20.04

# Instanz-Lebensdauer angeben (in Minuten)
gmab spawn -p hetzner -t 120  # 2 Stunden Lebensdauer

# Optionen kombinieren
gmab spawn -p hetzner -r fsn1 -i debian-11 -t 180
```

### Verbindung zu Ihrer Instanz herstellen

Sobald die Instanz läuft, verbinden Sie sich über SSH:

```bash
ssh root@<ip-adresse>
```

Ersetzen Sie `<ip-adresse>` durch die IP-Adresse aus der Ausgabe des spawn-Befehls.

## Schritt 5 - Verwalten Ihrer Instanzen

GMAB bietet Befehle, die Ihnen bei der Verwaltung Ihrer temporären Instanzen helfen.

### Auflisten aller Instanzen

Um alle Ihre aktiven Hetzner-Instanzen anzuzeigen:

```bash
gmab list -p hetzner
```

Beispielausgabe:

```
Provider    Instance ID            Label                IP Address        Status              Region        Image                     Time Left
=====================================================================================================================
hetzner     12345678              gmab-abc123def456    192.168.1.100    running             nbg1          ubuntu-22.04              45m
hetzner     98765432              gmab-ghi789jkl012    10.0.0.100       running             hel1          ubuntu-22.04              15m
hetzner     56781234              gmab-mno345pqr678    10.0.2.200       running (expired)   fsn1          debian-11                 expired
```

Die Spalte `Time Left` zeigt, wie viel Zeit verbleibt, bevor die Instanz als abgelaufen betrachtet wird.

### Den Ablaufmechanismus verstehen

Ein Hauptmerkmal von GMAB ist der Ablaufmechanismus. So funktioniert er:

1. Wenn Sie eine Instanz erstellen, geben Sie eine Lebensdauer in Minuten an (Standard ist 60)
2. GMAB verfolgt diese Lebensdauer und markiert Instanzen als "abgelaufen", sobald die Zeit abgelaufen ist
3. **Wichtig: GMAB beendet abgelaufene Instanzen NICHT automatisch**
4. Sie müssen explizit einen Befehl ausführen, um abgelaufene Instanzen zu beenden

Dieses Design gibt Ihnen die Kontrolle darüber, wann Instanzen tatsächlich beendet werden, und verhindert unerwartete Unterbrechungen, während Sie sie noch verwenden.

### Beenden von Instanzen

Um eine bestimmte Instanz zu beenden:

```bash
gmab terminate 12345678  # Verwendung der Instanz-ID
```

Oder:

```bash
gmab terminate gmab-abc123def456  # Verwendung des Labels
```

Um mehrere Instanzen gleichzeitig zu beenden:

```bash
gmab terminate 12345678 98765432
```

#### Beenden aller Instanzen

Um alle Ihre Hetzner-Instanzen zu beenden:

```bash
gmab terminate all -p hetzner
```

Sie werden zur Bestätigung aufgefordert:

```
Die folgenden Instanzen werden beendet:
- 12345678 (hetzner: gmab-abc123def456)
- 98765432 (hetzner: gmab-ghi789jkl012)
- 56781234 (hetzner: gmab-mno345pqr678)
Möchten Sie fortfahren? [j/N]: 
```

#### Beenden abgelaufener Instanzen

Die häufigste Bereinigungsaufgabe ist das Beenden abgelaufener Instanzen:

```bash
gmab terminate expired -p hetzner
```

Auch hier erhalten Sie eine Bestätigungsaufforderung:

```
Die folgenden abgelaufenen Instanzen werden beendet:
- 56781234 (hetzner: gmab-mno345pqr678)
Möchten Sie fortfahren? [j/N]: 
```

#### Verwendung des -y Flags für automatisierte Bereinigung

Für Skripte oder automatisierte Aufgaben können Sie das `-y` Flag verwenden, um Bestätigungsaufforderungen zu umgehen:

```bash
gmab terminate expired -p hetzner -y
```

Dies ist besonders nützlich für geplante Bereinigungsaufgaben, wie wir im nächsten Abschnitt sehen werden.

## Schritt 6 - Automatisieren der Bereinigung

Da GMAB abgelaufene Instanzen nicht automatisch beendet, können Sie eine geplante Bereinigung einrichten, um unnötige Kosten zu vermeiden.

### Einrichten eines Cron-Jobs (Linux/macOS)

1. Öffnen Sie Ihre crontab-Datei:

```bash
crontab -e
```

2. Fügen Sie eine Zeile hinzu, um den Bereinigungsbefehl regelmäßig auszuführen:

```
# Jede Stunde abgelaufene Instanzen bereinigen
0 * * * * gmab terminate expired -y
```

Dies wird jede Stunde zur vollen Stunde ausgeführt. Für eine seltenere Bereinigung:

```
# Täglich um Mitternacht ausführen
0 0 * * * gmab terminate expired -y
```

### Verwendung des Windows Task Schedulers

Unter Windows können Sie den Task Scheduler verwenden:

1. Erstellen Sie eine Batch-Datei (z.B. `gmab-cleanup.bat`) mit folgendem Inhalt:

```bat
@echo off
gmab terminate expired -y
```

2. Öffnen Sie den Task Scheduler und erstellen Sie eine neue Basisaufgabe
3. Legen Sie fest, dass die Aufgabe nach einem Zeitplan ausgeführt wird (z.B. täglich oder stündlich)
4. Verweisen Sie die Aktion auf die erstellte Batch-Datei

## Schritt 7 - Praktische Anwendungsbeispiele

Hier sind einige praktische Beispiele für die Verwendung von GMAB mit Hetzner Cloud.

### Beispiel 1: Schneller Sicherheitstest

Müssen Sie einen Sicherheitsscan von einer externen IP aus durchführen?

```bash
# Erstellen Sie eine Box mit 30 Minuten Lebensdauer
gmab spawn -p hetzner -t 30

# SSH-Verbindung zur Box herstellen
ssh root@<ip-adresse>

# Führen Sie Ihre Sicherheitstools aus
# ...

# Wenn Sie fertig sind, beenden Sie die Instanz
gmab terminate <instanz-id>
```

### Beispiel 2: Regionsspezifische Tests

Testen, wie Ihre Website aus verschiedenen Regionen erscheint:

```bash
# Instanzen in verschiedenen Regionen erstellen
gmab spawn -p hetzner -r nbg1 -t 60
gmab spawn -p hetzner -r hel1 -t 60
gmab spawn -p hetzner -r ash -t 60

# Führen Sie Ihre Tests von jeder Instanz aus
# ...

# Aufräumen, wenn Sie fertig sind
gmab terminate all -p hetzner -y
```

### Beispiel 3: Geplante Aufgaben

Regelmäßige Jobs ausführen, ohne den lokalen Rechner eingeschaltet zu lassen:

```bash
# Erstellen Sie eine Box mit längerer Lebensdauer
gmab spawn -p hetzner -t 1440  # 24 Stunden

# Richten Sie Ihren geplanten Job auf der Instanz ein
# ...

# Manuell beenden, wenn Sie fertig sind
gmab terminate <instanz-id>
```

## Fehlerbehebung

### Häufige Probleme

#### "Provider 'hetzner' is not configured"

Führen Sie `gmab configure -p hetzner` aus, um Ihre Hetzner-Anmeldedaten einzurichten.

#### "Failed to create server: Invalid API token"

Ihr Hetzner API-Token ist ungültig oder abgelaufen. Generieren Sie ein neues Token und aktualisieren Sie Ihre Konfiguration.

#### Instanz wird als "abgelaufen" angezeigt, läuft aber noch

Dies ist ein normales Verhalten. Abgelaufene Instanzen laufen weiter, bis sie explizit beendet werden.

#### "SSH key not found"

Überprüfen Sie den Pfad zu Ihrem öffentlichen SSH-Schlüssel in der GMAB-Konfiguration:

```bash
gmab configure --print
```

Aktualisieren Sie ihn, falls nötig:

```bash
gmab configure -p hetzner
```

## Best Practices

### Sinnvolle Lebensdauern verwenden

Setzen Sie vernünftige Ablaufzeiten basierend auf Ihren tatsächlichen Bedürfnissen:

```bash
# Für schnelle Tests (30 Minuten)
gmab spawn -p hetzner -t 30
   
# Für länger laufende Aufgaben (4 Stunden)
gmab spawn -p hetzner -t 240
```

### Regelmäßige Bereinigung

Entweder:
- Richten Sie einen Cron-Job ein, um `gmab terminate expired -y` regelmäßig auszuführen
- Gewöhnen Sie sich an, am Ende Ihrer Arbeitssitzung manuell aufzuräumen

### Sicherheitsempfehlungen

- Erstellen Sie ein dediziertes Hetzner-Projekt speziell für GMAB
- Verwenden Sie ein API-Token mit angemessenen Berechtigungen
- Wechseln Sie Ihre Hetzner API-Tokens regelmäßig
- Speichern Sie Konfigurationsdateien sicher

### Regionale Auswahl

Wählen Sie Regionen, die näher an Ihrem Zielpublikum oder Ihrer Workload liegen, für bessere Leistung.

## Fazit

GMAB mit Hetzner Cloud bietet eine effiziente Möglichkeit, temporäre Instanzen für verschiedene Anwendungsfälle bereitzustellen. Der Ablaufmechanismus hilft Ihnen, den Überblick über Ressourcen zu behalten, ohne sofortige Beendigung zu erzwingen, was Ihnen Flexibilität bietet und gleichzeitig hilft, unerwartete Kosten zu vermeiden.

Wichtige Erkenntnisse:
- Instanzen werden nach Ablauf ihrer Lebensdauer als "abgelaufen" markiert, laufen aber weiter
- Sie müssen Instanzen explizit mit `gmab terminate` beenden
- Das `-y` Flag überspringt Bestätigungsaufforderungen und ist nützlich für automatisierte Bereinigung
- Das Einrichten eines Cron-Jobs für regelmäßige Bereinigung wird dringend empfohlen

Mit diesem Wissen können Sie GMAB effizient einsetzen, um temporäre Hetzner Cloud Instanzen für Ihre Projekte, Tests und Workflows zu verwalten.

## Lizenz

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Steve Cannivy <steve@roudeleiw.lu>

-->