---
SPDX-License-Identifier: MIT
path: "/tutorials/install-postal-mail-server-on-ubuntu"
slug: "install-postal-mail-server-on-ubuntu"
title: "Setting Up a Self-Hosted Mail Server with Postal on Ubuntu 24.04"
short_description: "Learn how to install and configure Postal, an open-source self-hosted mail server, on Ubuntu 24.04 using Docker — including DNS records, SPF, DKIM, and sending your first email."
tags: ["Postal", "Mail Server", "SMTP", "Ubuntu", "Docker", "Email", "Linux"]
author: "Your Name"
author_link: "https://github.com/your-username"
author_img: "https://avatars.githubusercontent.com/u/XXXXXXX"
author_description: ""
language: "en"
available_languages: ["en"]
header_img: "header-x"
cta: "cloud"
---

## Introduction

Postal is a fully open-source, self-hosted mail server built for sending and receiving large volumes of email. It provides a polished web interface, built-in email tracking, bounce handling, webhook support, and detailed delivery logs — making it a powerful alternative to commercial services like SendGrid or Mailgun. Because you host it yourself on your own Hetzner server, you retain full control over your sending infrastructure, IP reputation, and data.

In this tutorial, you will install Postal on Ubuntu 24.04 using Docker, configure the required DNS records for proper email deliverability (including SPF, DKIM, and MX), and send your first test email through the Postal web interface.

**Prerequisites**

- A Hetzner Cloud server with at least **4 vCPUs and 8 GB RAM** (CPX31 or higher recommended). Mail servers handle concurrent queues and benefit from dedicated resources.
- **Ubuntu 24.04** installed on the server
- A **domain name** you control, with the ability to add DNS records (e.g., `mydomain.com`)
- A non-root user with `sudo` privileges, or access as root
- Port **25** (SMTP) must be open. Note: Hetzner Cloud blocks port 25 by default on new accounts to prevent spam. You will need to [request port 25 to be unblocked](https://docs.hetzner.com/cloud/servers/faq/#why-can-i-not-send-any-mails-from-my-cloud-server) via the Hetzner support portal before proceeding.

**Example values used in this tutorial**

| Placeholder | Example value |
|---|---|
| `<your-domain>` | `mydomain.com` |
| `<your-server-ip>` | `203.0.113.10` |
| `<postal-hostname>` | `postal.mydomain.com` |

Replace these with your actual domain and IP address throughout the tutorial.

## Step 1 - Prepare the Server

Start by updating the system and installing the required utilities.

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y git curl jq
```

Next, set a fully qualified domain name (FQDN) for your server. Postal uses this when identifying itself during SMTP connections:

```bash
sudo hostnamectl set-hostname postal.mydomain.com
```

Also ensure the hostname resolves correctly by editing `/etc/hosts`:

```bash
sudo nano /etc/hosts
```

Add or update the line for your server's public IP:

```
203.0.113.10   postal.mydomain.com postal
```

Save and close the file.

## Step 2 - Install Docker

Postal runs entirely inside Docker containers, so Docker must be installed first.

```bash
sudo apt install -y docker.io docker-compose
sudo systemctl enable --now docker
```

Add your current user to the `docker` group so you can run Docker commands without `sudo`:

```bash
sudo usermod -aG docker $USER
newgrp docker
```

Verify Docker is running correctly:

```bash
docker --version
docker run --rm hello-world
```

## Step 3 - Set Up MariaDB

Postal requires a MariaDB database (version 10.6 or higher). The easiest way to run it is as a Docker container alongside Postal.

Run MariaDB with a persistent volume and a secure password of your choice:

```bash
docker run -d \
  --name postal-mariadb \
  -p 127.0.0.1:3306:3306 \
  --restart always \
  -e MARIADB_DATABASE=postal \
  -e MARIADB_ROOT_PASSWORD=YourSecureDBPassword \
  mariadb:10.11
```

Replace `YourSecureDBPassword` with a strong password — you will need it in the next step. Wait a few seconds for MariaDB to fully start, then confirm it is running:

```bash
docker ps | grep postal-mariadb
```

## Step 4 - Install Postal

Clone the official Postal installation helper repository and create a symlink so the `postal` command is available system-wide:

```bash
sudo git clone https://github.com/postalserver/install /opt/postal/install
sudo ln -s /opt/postal/install/bin/postal /usr/bin/postal
```

### Step 4.1 - Bootstrap Postal

Run the bootstrap command with your postal hostname. This generates the main configuration file (`postal.yml`), a signing key, and a Caddyfile for the web proxy:

```bash
postal bootstrap postal.mydomain.com
```

The generated files will be placed in `/opt/postal/config/`. Open the main configuration file to update the database credentials:

```bash
sudo nano /opt/postal/config/postal.yml
```

Find the `main_db` section and update the password to match the one you set when starting MariaDB:

```yaml
main_db:
  host: 127.0.0.1
  username: root
  password: YourSecureDBPassword
  database: postal
```

Also review the `dns` section. It defines the subdomains Postal will use for mail routing, return paths, and tracking. Update each value to match your domain:

```yaml
dns:
  mx_records:
    - mx.mydomain.com
  spf_include: spf.postal.mydomain.com
  return_path_domain: rp.postal.mydomain.com
  route_domain: routes.postal.mydomain.com
  track_domain: track.postal.mydomain.com
```

Save and close the file.

### Step 4.2 - Initialize the Database and Create an Admin User

Run the following commands to create the database schema and your first admin user:

```bash
postal initialize
postal make-user
```

The `make-user` command will prompt you for a name, email address, and password. Use a strong password for this account, as it gives full access to the Postal web interface.

### Step 4.3 - Start Postal

```bash
postal start
```

Check that all containers started successfully:

```bash
postal status
```

You should see multiple containers running, including the Postal web interface, SMTP server, and worker processes.

## Step 5 - Set Up the Caddy Web Proxy

Postal includes a pre-generated `Caddyfile` that configures the Caddy web server to handle SSL termination and route HTTPS traffic to the Postal web interface. Caddy automatically obtains and renews a free Let's Encrypt certificate for your domain.

Run the Caddy container:

```bash
docker run -d \
  --name postal-caddy \
  --restart always \
  --network host \
  -v /opt/postal/config/Caddyfile:/etc/caddy/Caddyfile \
  -v /opt/postal/caddy-data:/data \
  caddy
```

Wait 30–60 seconds for Caddy to provision the SSL certificate. Then open your browser and navigate to:

```
https://postal.mydomain.com
```

Log in with the admin credentials you created in Step 4.2. You should see the Postal dashboard.

## Step 6 - Configure DNS Records

For your emails to be delivered reliably and not end up in spam folders, you must configure several DNS records. Log in to your domain registrar or DNS provider and add the following records, replacing `203.0.113.10` with your server's actual public IP address.

### Step 6.1 - A Records

These point your Postal hostname and mail subdomain to your server:

```
postal.mydomain.com     A    203.0.113.10
mx.mydomain.com         A    203.0.113.10
```

### Step 6.2 - MX Record

This tells receiving mail servers where to deliver email for your domain:

```
mydomain.com     MX    10    mx.mydomain.com
```

### Step 6.3 - SPF Record

SPF (Sender Policy Framework) tells other mail servers which IP addresses are authorized to send email on behalf of your domain:

```
spf.postal.mydomain.com    TXT    "v=spf1 ip4:203.0.113.10 ~all"
mydomain.com               TXT    "v=spf1 include:spf.postal.mydomain.com ~all"
```

### Step 6.4 - Return Path Record

This handles bounce emails and helps improve deliverability:

```
rp.postal.mydomain.com    MX     10    postal.mydomain.com
rp.postal.mydomain.com    TXT    "v=spf1 ip4:203.0.113.10 ~all"
```

### Step 6.5 - DKIM Record

DKIM (DomainKeys Identified Mail) adds a cryptographic signature to outgoing emails, which greatly improves trust with receiving mail servers. Postal generates a DKIM key automatically. To find your DKIM public key, go to the Postal web interface:

1. Click on your **Organization** → **Domains** → **Add Domain**
2. Enter `mydomain.com` and click **Create Domain**
3. Postal will display the required DNS records including the DKIM TXT record

It will look similar to:

```
postal._domainkey.mydomain.com    TXT    "v=DKIM1; t=s; h=sha256; p=YOUR_PUBLIC_KEY_HERE"
```

Copy the record exactly as shown in the Postal interface and add it to your DNS.

### Step 6.6 - Verify DNS Records

After adding all DNS records, you can verify them using `dig`:

```bash
dig TXT mydomain.com
dig MX mydomain.com
dig A postal.mydomain.com
```

DNS propagation can take up to 24–48 hours, though it is usually much faster. You can also use the domain verification tool inside the Postal web interface (under **Domains**) to check the status of each record.

## Step 7 - Send a Test Email

With DNS configured, you are ready to send your first email through Postal.

In the Postal web interface:

1. Navigate to your **Organization** → **Servers** → **New Server**
2. Give the server a name (e.g., `Production`) and click **Create Server**
3. Go to **Credentials** → **New Credential**, choose type **SMTP**, and save
4. Note the generated SMTP username and password
5. Go to **Send Message** → enter a recipient address, subject, and body → click **Send**

Check the **Messages** tab to see the delivery status and any log output. If the email was delivered successfully, you will see a green `Sent` status.

## Step 8 - Configure Firewall Rules

Allow only the necessary ports through the firewall:

```bash
sudo apt install -y ufw
sudo ufw allow OpenSSH
sudo ufw allow 80/tcp      # HTTP (used by Caddy for certificate issuance)
sudo ufw allow 443/tcp     # HTTPS (Postal web interface)
sudo ufw allow 25/tcp      # SMTP (receiving and relaying email)
sudo ufw allow 587/tcp     # SMTP submission (for application clients)
sudo ufw enable
```

Verify the rules:

```bash
sudo ufw status
```

## Conclusion

You now have a fully functional self-hosted mail server running on your Hetzner server. Your setup includes:

- **Postal** running in Docker with a MariaDB backend
- **Caddy** handling SSL termination with automatic Let's Encrypt certificates
- **DNS records** for MX, SPF, DKIM, and return path — all essential for good email deliverability
- **UFW firewall** configured to allow only necessary ports

From here, you can connect your web applications to Postal using the SMTP credentials from Step 7, add more sending domains, set up webhooks to receive delivery notifications, and monitor sending reputation through Postal's built-in dashboard.

For ongoing maintenance, keep your Postal containers updated by periodically running:

```bash
postal upgrade
```

##### License: MIT
