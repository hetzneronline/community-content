---
SPDX-License-Identifier: MIT
path: /tutorials/unite-your-infrastructure-with-netbird
slug: unite-your-infrastructure-with-netbird
date: 2025-12-11
title: Unite your infrastructure with NetBird 
short_description: Deploy your own private cloud on Hetzner and access it from anywhere via NetBird
tags:
  - NAT
  - VPN
  - Ubuntu
  - NetBird
author: Victor Gomez
author_link: https://github.com/viticodotdev
author_img: https://avatars.githubusercontent.com/u/73703121
author_description: Software Engineer and IT Magician.
language: en
available_languages:
  - en
header_img: header-x
cta: product
---
## Introduction

[NetBird](https://netbird.io/) is a unified connectivity platform combining a [WireGuard](https://www.wireguard.com/) configuration-free peer-to-peer private network and a centralized access control system making it easy to create secure private networks for your organization or home.

This tutorial provides a complete walkthrough for integrating **NetBird** with a **Hetzner Server** to establish a secure, unified private network. We will detail every step, including provisioning the necessary Cloud Network and Servers, configuring a generic **NAT gateway**, and connecting your devices (peers) using NetBird. Upon completion, you will have seamless, secure access to all resources within your private Cloud Network from any connected device.

**Prerequisites**

- A public domain address

**Example terminology**

| Name                         | Value          | Notes                                                                                     |
| ---------------------------- | -------------- | ----------------------------------------------------------------------------------------- |
| Domain                       | example.com    | Your public domain.                                                                       |
| Network IP range             | 192.168.0.0/16 | Your network range, defined during network creation.                                      |
| NAT server (Public IPv4)     | 203.0.113.1    | The internet-facing IPv4 address assigned to your NAT server after creation.              |
| NAT server (Network IPv4)    | 192.168.0.2    | The network IPv4 assigned to your NAT server.                                             |
| Client server (Network IPv4) | 192.168.0.3    | The network IPv4 assigned to your private server, make sure to select a reserved address. |
## Step 1 - Creating the necessary infrastructure
We will now create the necessary cloud infrastructure to host NetBird and give it access to a private server.

Open the [Hetzner Console](https://console.hetzner.com/) and select your project.

You have the option to create the Network first or to create it during the server creation process, we'll opt for creating our network beforehand.

- **Creating a network** 
  While in your project, select `Networking` -> `Networks` -> `Create network`.

  ![[images/1.jpeg]]
- **Creating a NAT server**
  Select `Cloud` -> `Servers` -> `Add Server`.
  
  Make sure that our NAT server has a public IPv4 address. Additionally, attach this server to the previously created network.

  ![[images/Pasted image 20251211121413.png]]
  
  > For easier setup, we'll be using the prewritten Cloud-init files found on the [NAT gateway for private Cloud Networks setup](https://community.hetzner.com/tutorials/how-to-set-up-nat-for-cloud-networks#step-6---cloud-init) guide.
  
  ![[images/3.jpeg]]
- **Creating a client server**
  Once again select `Cloud` -> `Servers` -> `Add Server`
  
  Attach this server to the previously created network.

  ![[images/Pasted image 20251211100305.png]]
  
  > Set up the Cloud-init for client servers found in the [guide](https://community.hetzner.com/tutorials/how-to-set-up-nat-for-cloud-networks#step-6---cloud-init).
  
  ![[images/4.jpeg]]
  
- **Creating a network route**
  Select `Networking` -> `Networks` and select the previously created network, then select `Routes` -> `Add route`, then set the following values:
  
  
| Name        | Value       | Notes                                                                                                                    |
| ----------- | ----------- | ------------------------------------------------------------------------------------------------------------------------ |
| Destination | 0.0.0.0/0   | This signifies that the destination can be any possible IPv4 address, allowing our local network to access the internet. |
| Gateway     | 192.168.0.2 | This is our NAT server's network IPv4.                                                                                   |

  
  ![[images/5.jpeg]]

With this done, our NAT setup should be completed, [let's connect to our private server](https://docs.hetzner.com/cloud/servers/getting-started/connecting-via-private-ip) and run some tests. We'll first test if we can ping Google's public DNS server `8.8.8.8`, then we'll test pinging a domain itself. If our setup was successful, we should have no packet loss.

```bash
# Test internet connectivity
ping -c 3 8.8.8.8

# Test namespace resolution
ping -c 3 google.com
```
  
  > The `-c 3` flag in the `ping` command is letting our server know that once 3 ping attempts are done it should stop executing

## Step 2 - Configuring the DNS record

We will now configure our DNS record so that our domain points to our NAT server, allowing us to install and set up  NetBird.

In your DNS manager, create the following `A` record:

> **Important:** If using CloudFlare, make sure to disable the `Proxying` on your record as it is known to cause issues.

| Type | Name | Content     | TTL       |
| ---- | ---- | ----------- | --------- |
| A    | @    | 203.0.113.1 | Automatic |

This DNS record is telling our domain registrar that our main domain `example.com` should point to our NAT's public IPv4.
guide
> While you can use your main domain for setting up NetBird, it is recommended that you set up the `A` record with a subdomain instead.
## Step 3 -  Installing and Setting up NetBird

We will now proceed to install NetBird on our NAT server, so that it can be used as a bridge to reach our private server in the network we created.

> For our NetBird installation, we'll be following the [Self-hosting quickstart guide](https://docs.netbird.io/selfhosted/selfhosted-quickstart#quick-self-hosting-with-zitadel-id-p), which will give us a running instance of NetBird using [Zitadel](https://zitadel.com/) as our IDP (Identity Provider)

Before installing anything, let's make sure that our system is up to date.

Connect to your server and upgrade your system:

> The NAT server used in this example is running Ubuntu 24.04, make sure to use the appropriate package manager for your server.

```bash
apt update && apt upgrade -y
```

After that, we should [install Docker](https://docs.docker.com/engine/install/):

```bash
# Add Docker's official GPG key:
sudo apt update
sudo apt install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
sudo tee /etc/apt/sources.list.d/docker.sources <<EOF
Types: deb
URIs: https://download.docker.com/linux/ubuntu
Suites: $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}")
Components: stable
Signed-By: /etc/apt/keyrings/docker.asc
EOF

sudo apt update
```

```bash
sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

Once Docker is installed on our server, we need to make sure we have the `curl` and `jq` packages installed:

```bash
sudo apt install jq curl
```

Once all the requirements are met, we can download and execute the NetBird installation script:

```bash
export NETBIRD_DOMAIN=example.com; curl -fsSL https://github.com/netbirdio/netbird/releases/latest/download/getting-started-with-zitadel.sh | bash
```

Once the installation is complete, you can access your NetBird instance via your `NETBIRD_DOMAIN` using the credentials shown in your terminal.

Once we complete the initial user setup via Zitadel, we'll be met with a NetBird welcome page, simply select `Skip to Dashboard`.

![[images/Pasted image 20251211110556.png]]

## Step 4 - Setting up a Zitadel account (Optional)

As previously stated, this instance of NetBird uses Zitadel as an identity provider, we'll now use Zitadel to create a new account to access NetBird.

Go to `https://example.com/ui/console` to access the Zitadel console.

![[images/Pasted image 20251211110752.png]]
Once in the Zitadel console, select `Users` -> `New` and create a new Zitadel user.

> It is important that you check both the `Email verified` and `Set Initial password` checkboxes, since this server currently has no SMTP configuration.

![[images/Pasted image 20251211110942.png]]

Once the user is created, if we attempt to log in with it we'll be met with a `User Approval Pending` screen, this is because we first have to approve the user in our NetBird dashboard.

![[images/Pasted image 20251211111112.png]]

Once again, log in with the default admin account created, select `Team` -> `Users` and select the `Approve`option on the new Zitadel user, while at it, let's assign the `Admin` role to it.

![[images/Pasted image 20251211111209.png]]

![[images/Pasted image 20251211111244.png]]

With this done, the newly created account can be used to access NetBird.

## Step 5 - Connecting our server to NetBird

NetBird calls every device connected to the network a [**Peer**](https://docs.netbird.io/manage/peers/add-machines-to-your-network), each Peer can be assigned to a group for access control and connection rules.

We'll start by connecting our private server to our NetBird network, we'll do this with a **[Setup Key](https://docs.netbird.io/manage/peers/register-machines-using-setup-keys)** that will auto assign any peer created with said key to a group.

> While optional, it is recommended that you use Setup Keys when adding new devices to your network

Select `Setup Keys` -> `Create Setup Key`:

![[images/Pasted image 20251211111646.png]]

For this example, we'll create a `Acme Laboratories` setup key, make it reusable for 7 days, and auto assign every machine connected with this setup key to a `Hetzner` group.

![[images/Pasted image 20251211111920.png]]

Once the creation is complete, NetBird will prompt you with the necessary commands to connect a new peer using the Setup Key.

![[images/Pasted image 20251211112003.png]]
Connect into your private server and execute the command as prompted by NetBird, first we'll install NetBird:

```bash
curl -fsSL https://pkgs.netbird.io/install.sh | sh
```

Then we'll connect to our NetBird instance using our setup key:

```bash
sudo netbird up --management-url https://example.com --setup-key <SETUP KEY> 
```

If done correctly, our terminal will return an output of `Connected`, signaling us that the connection has been successful, we can see our private server now connected to NetBird in the `Peers` section of the dashboard.

![[Pasted image 20251211112515.png]]

## Conclusion

You have successfully built your own cloud network, configured a NAT Gateway to allow internet access for your private resources, and deployed NetBird to safely access those resources from anywhere.

NetBird  provides a unified FOSS platform for reliable and secure connectivity, giving you full control over who and how gains access to your cloud and on-premises resources.

For further steps, browse [how to connect other devices to your NetBird network](https://docs.netbird.io/get-started/install), as well as [how to provide ssh access to peers in your network](https://docs.netbird.io/manage/peers/ssh). Additionally, to learn how to manage your access control via Zitadel read their [official documentation](https://zitadel.com/docs).
##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Victor Gomez [vicgmezp@gmail.com]

-->