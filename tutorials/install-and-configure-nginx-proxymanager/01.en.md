---
SPDX-License-Identifier: MIT
path: "/tutorials/nstall-and-configure-nginx-proxymanager"
slug: "nstall-and-configure-nginx-proxymanager"
date: "2021-06-08"
title: "Install and Configure Ngninx Proxymanager"
short_description: "Host and secure multiple Services on one IP address and redirect your clients according to their target using Nginx Proxymanager. A GUI based Proxy-Server software"
tags: ["SSL; Lets-Encrypt; NGINX; Proxy"]
author: "Tim Stich"
author_link: "https://github.com/T-stich"
author_img: "https://avatars.githubusercontent.com/u/83845082?v=4"
author_description: ""
language: "en"
available_languages: ["en"]
header_img: "header-x"
cta: "product"
---

## Introduction

On this tutorial we will cover the installation of Ngnix Proxymanger.

A GUI based software for creating and automated renewing of SSL certificates and redirecting visitors to their requested target.
Therefore we will use Docker/Docker-compose to install the software. We will also use it to secure the adminstration access of proxymanager.
As additional examples, we will also secure and redirect, as also restrict the access to an example service running on port 8080. 

**Prerequisites**

For this tutorial you need a Server eg. a Cloud-Server or a Dedicacted-Root-Server. You should also already have a Service, which you want to redirect and secure with your Proxymanager.
In order to secure your access via SSL, we also assume you to own a corresponding domain. On this tutorial we will work with these subdomains:

`proxy.<yourdomain.com>` 
Will be used to access the adminstration interface of the NGINX Proxy-Manager

`website.<yourdomain.com>` 
Shall represent your own Website or Service (you may use a more personal subdomain).  --optional--

`restricted.<yourdomain.com>`
This subdomain shall show you the use of the "Access Lists" tool. You can use it to restrict the access to some defined credentials (basic auth). --optional--

Please note, that Proxymanger needs to run on Port 80, 443 aswell as 81. If you already run a service on these ports, you have to change the ports. 
Since NGINX Proxy-Manager offers the creation and automated renewing of SSL certificates, this service should also use "http". But a "https" redirection is also possible.

## Step 1 - Add DNS-Entries:

Ngnix Proxymanager provides an administration Panel, which we will also secure and hereby use it as one of our demonstration services.
If you use the Hetzner DNS console, you can edit the following entry as you wish and insert it accordingly via the "manual Zonefile editing".
Otherwise it would be necessary to create a DNS entry with your respective provider. We will proceed here with `proxy.<yourdomain.com>`, `website.<yourdomain.com>` and `restricted.<yourdomain.com>` .


`proxy IN A <yourServerIPv4>`

`website IN A <yourServerIPv4>`

`restricted IN A <yourServerIPv4>`

## Step 2 - Install the dependencies an create a compose file:

NGINX Proxy-Manager runs on a dockercontainer. Therfore we need to install `docker`,`docker-compose` and `docker.io` on our machine. 

Run the following commands:

```
$ apt-get update
$ apt-get install docker docker-compose docker.io -y
```

Now we need to create a file called `docker-compose.yaml`. This file will define the images docker will pull.
You can use every text-editor for that operation. On my example steps we will use the most simple version `nano`. Feel free to use your own editor eg. vim.

```
$ mkdir proxy-manager
$ cd proxy-manager
$ nano docker-compose.yaml
```

We paste the follwing content and edit the credentials:

```
version: "3"
services:
  app:
    image: 'jc21/nginx-proxy-manager:latest'
    restart: always
    ports:
      # Public HTTP Port:
      - '80:80'
      # Public HTTPS Port:
      - '443:443'
      # Admin Web Port:
      - '81:81'
      # Add any other Stream port you want to expose
      # - '21:21' # FTP
    environment:
      # These are the settings to access your db
      DB_MYSQL_HOST: "db"
      DB_MYSQL_PORT: 3306
      DB_MYSQL_USER: "holu"
      DB_MYSQL_PASSWORD: "<yoursupersecretpassword>"
      DB_MYSQL_NAME: "npm"
      # If you would rather use Sqlite uncomment this
      # and remove all DB_MYSQL_* lines above
      # DB_SQLITE_FILE: "/data/database.sqlite"
      # Uncomment this if IPv6 is not enabled on your host
      # DISABLE_IPV6: 'true'
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
    depends_on:
      - db
  db:
    image: 'jc21/mariadb-aria:latest'
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: '<yoursupersecretpassword>'
      MYSQL_DATABASE: 'npm'
      MYSQL_USER: 'holu'
      MYSQL_PASSWORD: '<yoursupersecretpassword>'
    volumes:
      - ./data/mysql:/var/lib/mysql
```


## Step 3 - Pull the Images and Install the Software:

Now we need to pull the images, we have defined in our yaml file:

```
$ docker-compose up -d
```

After a short waiting time, the Proxymanager service should already be running. You can now access the Web-GUI the first time via the address `http://<yourServerIP>:81`
Therefore use standard credentials:

Username: `admin@example.com`
Password: `changeme`

After entering these credentials you will be led, to the creation of your Administrator Account. Complete these steps by filling in your name as also your E-Mail address.
Now you can change your Login-Password to your own one.

## Step 4 - Configure your first Proxyhost:

Now we go to the dashboard of our Proxymanager Panel:

![grafik](https://user-images.githubusercontent.com/83845082/121254364-705bec00-c8aa-11eb-8e40-d65de243f33a.png)

Choose the option "Proxy Hosts" and add your first Proxy-Host by clicking the button "Add Proxy Host".

Now you can add your created DNS-Entry for your Proxymanager on the example `proxy.<yourdomain.com>`.

![grafik](https://user-images.githubusercontent.com/83845082/121254993-3212fc80-c8ab-11eb-8978-b1cff8001101.png)

(Please be aware of the fact that you would need to click on the collapsing menu below in order to add your domain. Pressing enter is not possible.)

Now choose as "scheme" `http`, for "Forward Hostname / IP" you enter `<yourPublicIPAddress>`. For "Port" you choose 81 (port of the administration interface)
After that you change to the "SSL" Tab. By clicking the "SSL" line, you can choose `Request a new SSL Certificate`

![grafik](https://user-images.githubusercontent.com/83845082/121258779-99cb4680-c8af-11eb-9704-730e0b50f11d.png)

We now tick "Force SSL" in order to always redirect via HTTPS.
Enter your E-mail address and "...Agree to the the LetÂ´s Encrypt Terms of Service".

After that click on "Save", to request the SSL-certificate.

If everything goes as expected, you should now be able to access the administration Interface of your NGINX Proxy-Manager via SSL on: https://proxy.<yourdomain.com>
For further configrations, we reccomend to go on with this domain, since the traffic is already secured via SSL.

## Step 5 - Secure your own Website/Serivce --optional--

Now we need to redirect our own Serivce, we assume here that this Website runs on port 8080. Therefore we add another Proxy Host:

![grafik](https://user-images.githubusercontent.com/83845082/121261099-88d00480-c8b2-11eb-87d6-ff7483992862.png)

Enter the subdomain you have created for your website/service. On our example `website.<yourdomain.com>`
(If you want to redirect another subdomain eg. "www", you would additionaly need to enter it here. Please note that the corresponding DNS-Entry already needs to be created.)

![grafik](https://user-images.githubusercontent.com/83845082/121261417-01cf5c00-c8b3-11eb-8ba3-f577dcb2f818.png)

(If your Service already uses a SSL-Certificate you would need to choose "https" as Scheme and wont need to request another certificate here)

Again, you switch to the "SSL" Tab. Here you request another SSL-Certificate. "Force SSL" again and "Agree to the Lets-Encrypt Terms of Service". After that save your configration, by clicking "save".

At this point your Website/Service should already be availabile on your created subdomain: https://website.<yourdomain.com>


## Step 4 - Restrict access to a specific service (Basic Auth) --optional--

At this step, we will cover the steps to restrict the access (basic auth) to one our your services/website. As an example, this service will also run on port `8080`.

Therefore we first need to create a "Access List". Therfore, please change from "Dashboard" to "Access Lists" and choose "Add access list".

On the Dialog, you now enter the Name of your Access-List.

![grafik](https://user-images.githubusercontent.com/83845082/121264088-e49c8c80-c8b6-11eb-873c-47aacbeb9c14.png)

After that you change to the "Authorization" Tab and also add your wished access credentials.

Save that list and change back to the Dashboard, where you now add another Proxy-Host. Proceed on the as already shown on Step 3, but now choose your created Access-List below:

![grafik](https://user-images.githubusercontent.com/83845082/121264753-f3d00a00-c8b7-11eb-8932-ca1f5f8c24a4.png)

If you now try to access your subdomain via the browser: https://restricted.<yourdomain.com>, you shall get asked for your choosen credentials.

## Conclusion

Now you are redirecting, serveral services to their corresponding subdomains. This does not only makes them simpler for your access, but also renews the SSL-Certificates automatically. You can also restrict the access to your redirected services.
It gives you also the abilitly to host serveral services/websites on the same machine/IP-Address. This can save ressources, IP addresses and money.


##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: [submitter's name and email address here]

-->
