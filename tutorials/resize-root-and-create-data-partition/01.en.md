---
SPDX-License-Identifier: MIT
path: "/tutorials/resize-root-and-create-data-partition"
slug: "resize-root-and-create-data-partition"
date: "2025-10-01"
title: "How to resize the root partition and create a new data partition"
short_description: "Shrink the root partition to free up space and create a new data partition using the Hetzner Rescue System."
tags: ["Rescue System", "Debian", "Ubuntu", "parted", "filesystem", "ext4"]
author: "Max Witt"
author_link: "https://github.com/SiFuMax09"
author_img: "https://avatars.githubusercontent.com/u/131544883"
author_description: ""
language: "en"
available_languages: ["en"]
header_img: "header-4"
cta: "dedicated"
---

## Introduction

In this tutorial, we will go through the process of shrinking the root partition of a Linux server and creating a new data partition in the freed space. This guide is specifically tailored for servers running in the Hetzner environment, making use of the Hetzner Rescue System.

This tutorial assumes you have already activated the Rescue System from your Hetzner Robot or Cloud Console.

> **Warning:** The steps below may destroy existing data on the device.

**Prerequisites**

* A Hetzner server with root access
* A backup of all important data (strongly recommended) - You can make a Snapshot in [Hetzner Console](https://console.hetzner.com/) if you have data on the machine

## Step 1 - Boot into the Rescue System

If you haven't already, boot the server into the Hetzner Rescue System. Ensure that the root partition is not mounted. E.g. check with:

```bash
lsblk
```

If the root partition is mounted, it will look something like this:

```
NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda       8:0    0 38.1G  0 disk
├─sda1    8:1    0 20.2G  0 part /
...
```

## Step 2 - Resize the Partition

* **Check and Shrink the Filesystem**
  
  Run the following commands to check and shrink the filesystem:
  ```bash
  e2fsck -f -y /dev/sda1
  resize2fs /dev/sda1 20G
  ```
  This reduces the root filesystem to 20 GB.

<br>

* **Adjust the Partition**
  
  Resize the root partition to a slightly larger size than the filesystem to allow some buffer (22 GB in this case):
  ```bash
  parted /dev/sda
  (parted) print
  (parted) resizepart 1 22GB
  (parted) quit
  ```

<br>

* **Repair the Filesystem**
  
  ```bash
  e2fsck -f -y /dev/sda1
  ```
  This verifies and repairs the resized filesystem.

<br>

* **Create a New Partition**
  
  Use the remaining free space for a new partition:
  ```bash
  parted /dev/sda mkpart primary ext4 22GB 100%
  mkfs.ext4 /dev/sda2
  ```
  This creates and formats a new ext4 partition.

## Step 3 - Mountpoint Preparation

Prepare and mount the new partition:

```bash
mkdir /data
mount /dev/sda2 /data
df -h | grep data
```

Then check your partitions again, for example with:
```bash
lsblk
```

If this look good, reboot the server to exit the Rescue System and boot normally.

After reboot, the `/data` directory might no longer be available. If it is missing, create it again.

## Step 4 - Configure fstab

* Check the UUID of the new partition:
  ```bash
  blkid /dev/sda2
  ```
  Save the UUID for the fstab configuration.

<br>

* Edit `/etc/fstab` and add the following line:
  
  > Replace `<uuid-data>` with the UUID of `/dev/sda2`.
  
  ```fstab
  UUID=<uuid-data>   /data   ext4   defaults   0  2
  ```

## Step 5 - Test the Setup

* Reload systemd and remount all:
  ```bash
  systemctl daemon-reload
  mount -a
  ```

* Verify with:
  ```bash
  df -h
  ```

* Reboot the server to ensure the configuration persists:
  ```bash
  reboot
  df -h
  ```

## Conclusion

* The root partition (`/`) has been reduced to 20 GB.
* A new data partition (`/data`) uses the remaining disk space.
* Automatic mounting of `/data` is configured via `fstab`.

##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Max Witt [me@max-witt.de](mailto:me@max-witt.de)

-->
