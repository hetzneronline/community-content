SPDX-License-Identifier: MIT
path: "/tutorials/hetzner-storage-backups"
slug: "hetzner-storage-backups"
date: "2025-02-07"
title: "How to Use Hetzner Storage Boxes for Backups and File Hosting"
short_description: "Learn how to set up and use Hetzner Storage Boxes with SFTP, SCP, Rsync, WebDAV, and Samba for efficient backups and file hosting."
tags: ["Hetzner", "Storage Boxes", "Backups", "File Hosting"]
author: "Stephen Ndegwa"
author_link: "https://github.com/stephenndegwa"
author_img: "https://avatars.githubusercontent.com/u/105418748"
author_description: "System administrator with expertise in Linux, storage solutions, and high-availability systems."
language: "en"
available_languages: ["en"]
header_img: "header-storage-box"
cta: "product"
---

## 1. Introduction

### Overview of Hetzner Storage Boxes

Hetzner Storage Boxes provide a cost-effective, secure, scalable, and reliable solution for backups and file hosting. They support multiple protocols, making them versatile and easy to use with a wide range of tools.

#### Key Benefits:

- **Cost-effective**: Affordable storage plans for personal and professional needs.
- **Secure**: Robust access controls and encryption.
- **Scalable**: Flexible storage plans to match growing requirements.
- **Reliable**: High availability and performance.

#### Multi-Protocol Support:

- SFTP
- SCP
- Rsync
- WebDAV
- Samba/CIFS

#### Common Use Cases:

- **Personal Backups**: Safeguard personal files and system snapshots.
- **Collaborative File Sharing**: Share files securely with teams or individuals.
- **Data Synchronization**: Sync files across multiple devices seamlessly.


## 2. Prerequisites

To follow this tutorial, ensure the following:

1. **Hetzner Account**:

   - Access to the Hetzner Console.

2. **Knowledge**:

   - Familiarity with basic file transfer tools and commands.

3. **SSH Key Setup** (Optional):

   - Recommended for secure access.

4. **Required Tools/Software**:

   - Rsync
   - SFTP client (e.g., FileZilla or WinSCP)
   - WebDAV software
   - Samba
   - SCP

5. **Example Terminology**:

   - `<your_storagebox_host>`: The hostname for your Hetzner Storage Box.
   - `<backup_directory>`: The directory you want to back up.

---

## 3. Setting Up a Hetzner Storage Box

### Step 1: Create a Storage Box

1. Log in to your Hetzner Robot.
2. Navigate to the **Storage Boxes** section.
3. Select a plan that meets your requirements.
4. Configure the Storage Box and finalize the setup.

### Step 2: Access Credentials

1. Locate the credentials for your Storage Box:
   - **Username**: Assigned username for the box.
   - **Hostname**: Provided in the Hetzner Console.
   - **Protocols**: Available access methods (e.g., SFTP, Rsync, SCP).
2. Enable the required protocols in the Hetzner Console.
   - Example: Turn on **Rsync** or **WebDAV** as needed.

---

## 4. Connecting to the Storage Box

### 4.1 Using SFTP

#### Connect with an SFTP Client

1. Install an SFTP client like FileZilla or WinSCP.
2. Use the following example command to connect via the terminal:
   ```bash
   sftp -P 23 username@<your_storagebox_host>
   ```

#### Uploading Files

To upload a file to your Hetzner Storage Box:

1. Connect to the Storage Box using the `sftp` command.
2. Use the `put` command to upload files:
   ```bash
   put /path/to/local/file /path/to/remote/directory
   ```

#### Example:

To upload a file named `backup.zip` from your local `/home/user` directory to the remote `/backups` directory:

```bash
put /home/user/backup.zip /backups
```

#### Downloading Files

To download files from the Storage Box:

1. Use the `get` command:
   ```bash
   get /path/to/remote/file /path/to/local/directory
   ```

#### Example:

To download `logs.tar.gz` from the `/logs` directory on the Storage Box to your local `/home/user` directory:

```bash
get /logs/logs.tar.gz /home/user
```

#### Other Useful Commands

- **List Files**: Use the `ls` command to list files in the current directory:

  ```bash
  ls
  ```

- **Change Directory**: Use the `cd` command to navigate to a different directory:

  ```bash
  cd /path/to/directory
  ```

- **Create Directory**: Use the `mkdir` command to create a new directory:

  ```bash
  mkdir /path/to/new/directory
  ```

- **Delete Files**: Use the `rm` command to delete a file:

  ```bash
  rm /path/to/file
  ```

- **Exit SFTP**: Use the `bye` or `exit` command to close the SFTP session.

---

### 4.2 Using SCP

#### Uploading Files with SCP

SCP (Secure Copy Protocol) is a straightforward way to transfer files securely to your Hetzner Storage Box.

Use the following command to upload files:

```bash
scp -P 23 /path/to/local/file username@<your_storagebox_host>:/path/to/remote/directory
```

#### Example:

To upload a file named `document.pdf` from your local `/home/user/documents` directory to the remote `/backups` directory:

```bash
scp -P 23 /home/user/documents/document.pdf username@<your_storagebox_host>:/backups
```

#### Downloading Files with SCP

To download files from the Storage Box, use the following command:

```bash
scp -P 23 username@<your_storagebox_host>:/path/to/remote/file /path/to/local/directory
```

#### Example:

To download a file named `backup.zip` from the remote `/backups` directory to your local `/home/user/downloads` directory:

```bash
scp -P 23 username@<your_storagebox_host>:/backups/backup.zip /home/user/downloads
```

#### Recursive Transfers

To copy directories recursively (including all files and subdirectories), use the `-r` flag:

```bash
scp -P 23 -r /path/to/local/directory username@<your_storagebox_host>:/path/to/remote/directory
```

#### Example:

To upload a folder named `project` from your local `/home/user/documents` to the remote `/backups` directory:

```bash
scp -P 23 -r /home/user/documents/project username@<your_storagebox_host>:/backups
```

---

### 4.3 Using Rsync

#### Setup and Advantages

Rsync is a powerful tool for efficient backups and synchronization. It minimizes data transfer by copying only changed files.

#### Rsync Command Flags Explained

- `-a`: Archive mode, which preserves symbolic links, permissions, timestamps, and directories.
- `-v`: Verbose mode, which provides detailed output of the process.
- `-z`: Compresses file data during the transfer to reduce bandwidth usage.
- `-e`: Specifies the remote shell to use, such as `ssh` with a specific port.
- `--delete`: Deletes files in the destination that do not exist in the source (useful for mirroring).
- `--dry-run`: Simulates the operation without making any changes, allowing you to preview the outcome.

#### Uploading Files to the Storage Box

Use the following command to upload files:

```bash
rsync -avz -e "ssh -p 23" /path/to/local/directory username@<your_storagebox_host>:/path/to/remote/directory
```

#### Example:

To upload the `/home/user/documents` folder to the remote `/backups/documents` directory:

```bash
rsync -avz -e "ssh -p 23" /home/user/documents username@<your_storagebox_host>:/backups/documents
```

#### Downloading Files from the Storage Box

Use this command to download files:

```bash
rsync -avz -e "ssh -p 23" username@<your_storagebox_host>:/path/to/remote/directory /path/to/local/directory
```

#### Example:

To download the `/backups/photos` folder from the Storage Box to the local `/home/user/photos` directory:

```bash
rsync -avz -e "ssh -p 23" username@<your_storagebox_host>:/backups/photos /home/user/photos
```

#### Other Useful Options

- **Delete Extra Files**: To mirror directories, delete extra files in the destination:

  ```bash
  rsync -avz --delete -e "ssh -p 23" /path/to/local/directory username@<your_storagebox_host>:/path/to/remote/directory
  ```

- **Dry Run**: To preview changes without transferring files:

  ```bash
  rsync -avz --dry-run -e "ssh -p 23" /path/to/local/directory username@<your_storagebox_host>:/path/to/remote/directory
  ```

#### Automating Rsync with Cron Jobs

1. Open the crontab editor:

   ```bash
   crontab -e
   ```

2. Add a line to schedule backups:

   ```bash
   0 2 * * * rsync -avz -e "ssh -p 23" /local/directory username@<your_storagebox_host>:/remote/directory
   ```

---

### 4.4 Using WebDAV

#### Setting Up WebDAV

1. Install WebDAV software for your OS.
   - **Windows**: Use built-in tools to add a network location.
   - **macOS**: Use Finder to connect to a server.
   - **Linux**: Install `davfs2` to mount the WebDAV share.

#### Example Configuration

- **Windows**:

  1. Open **File Explorer**.
  2. Select **Add a Network Location**.
  3. Enter the WebDAV URL: `https://<your_storagebox_host>/dav`.

- **Linux**:

  ```bash
  sudo mount -t davfs https://<your_storagebox_host>/dav /mnt/storagebox
  ```

---

### 4.5 Using Samba (CIFS)

#### Setting Up Samba

1. Install Samba on your local machine.
2. Mount the shared folder:
   ```bash
   sudo mount -t cifs //<your_storagebox_host>/<share> /mnt/storagebox -o username=<username>
   ```

#### Access Shared Folders

Navigate to the mounted directory to view and manage files.

---

### 4.6 Connecting to Hetzner Storage Boxes on Windows via Command Prompt

#### Using Command Prompt for SFTP

1. Open **Command Prompt** (cmd).
2. Use the `sftp` command to connect:
   ```bash
   sftp -P 23 username@<your_storagebox_host>
   ```
3. Follow the same commands for uploading, downloading, and managing files as in the SFTP section.

#### Example:

To upload a file:

```bash
put C:\path\to\file.txt /remote/path
```

To download a file:

```bash
get /remote/path/file.txt C:\path\to\local
```

#### Using WebDAV on Windows

1. Open **File Explorer**.
2. Click **This PC** and select **Add a network location**.
3. Enter the WebDAV URL as `https://<your_storagebox_host>/dav`.
4. Provide your Hetzner Storage Box credentials.
5. You can now access the Storage Box as a mapped drive.

#### Using `net use` for WebDAV or CIFS on Windows

1. Open **Command Prompt**.

2. Use the `net use` command to map the Storage Box as a network drive:

   ```bash
   net use Z: https://<your_storagebox_host>/dav /USER:username password
   ```

   Replace `Z:` with your preferred drive letter.

3. For CIFS (Samba), use:

   ```bash
   net use Z: \\<your_storagebox_host>\<share> /USER:username password
   ```

4. Access the drive via **File Explorer** or use it in other applications as a regular drive.

---

## 5. Conclusion

Hetzner Storage Boxes offer a versatile and reliable solution for backups and file hosting. Setting up and using protocols like SFTP, SCP, Rsync, WebDAV, and Samba, users can customize the service to their specific needs. 

### License: MIT

<!--
Contributor's Certificate of Origin
By making a contribution to this project, I certify that:
(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or
(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or
(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.
(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.
Signed-off-by: Stephen Ndegwa - sndegwa@hostraha.com
-->