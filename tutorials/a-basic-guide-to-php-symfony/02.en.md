---
SPDX-License-Identifier: MIT
path: "/tutorials/a-basic-guide-to-php-symfony-routes-templates-and-controllers"
slug: "a-basic-guide-to-php-symfony-routes-templates-and-controllers"
date: "2019-03-16"
title: "A basic guide to PHP Symfony - Routes, Templates and Controllers"
short_description: "Symfony is a powerful PHP Framework. In this tutorial series we will take a look at many parts of it. In this part we are going to learn more about routes, templates and controllers."
tags: ["Development", "Lang:PHP", "Lang:HTML", "Lang:Twig"]
author: "Moritz Fromm"
author_link: "https://github.com/frommMoritz/"
author_img: "https://avatars.githubusercontent.com/u/34239260"
author_description: "Manipulating arrays of characters in modern text editors that need more RAM than we used to do a flight to the moon. But it's super awesome... "
language: "en"
available_languages: ["en"]
header_img: ""
---

# A basic guide to PHP Symfony - Routes, Templates and Controllers

One of Symfonys super powers is, that it handles routing for us. What's meant by this? When we open the route `/item/edit/1` in our web browser, it will match this to the function that generates a response.

In Symfony we have the concepts of routes. A route is the path, that comes after our domain. In the case `https://example.com/item/edit/1` the `/item/edit/1` would be our route. Matching that to the functions that handles our request is one of Symfonys jobs. Those functions are, for now, organized in multiple Controllers. It is possible, and therefore highly recommended, to use multiple well named controllers. Example given: in an online Shop we may have a `ProductController`, a `PrivacyController` (may the GDPR be blessed), a `PurchaseController` and so on. While we could organize it all in a single controller, e.g. `ShopController`, development wouldn't be that easy because we have that singe huge file.

## Step 1 - Creating our first route

In Symfony you, especially at the beginning, will generate all dynamic page contents inside of a `Controller`. We will create our first controller by using the `bin/console` helper. When we run `php bin/console make:controller` and a prompt will appear, asking us for the name of our controller. For now we will use `DefaultController`.

<details>
    <summary>(Click to expand) Output of the command</summary>

```bash
php bin/console make:controller

 Choose a name for your controller class (e.g. TinyChefController):
 > DefaultController

 created: src/Controller/DefaultController.php
 created: templates/default/index.html.twig

           
  Success! 
           

 Next: Open your new controller class and add some pages!
```
</details>

Congratulations, we have just created our first Controller and routes.

When we have a look in our editor, there are two new files created. We have `src/Controller/DefaultController.php` and also `templates/default/index.html.twig`. The same in both of those is the name of our controller.

When we have a look into those files, preferable side by side, we can notice some similarities. For example: In the `DefaultController.php` we call

```php=15
return $this->render('default/index.html.twig', [
	'controller_name' => 'DefaultController',
]);
```

What we can see here is:
- The path `default/index.html.twig` matches the newly created file in the `templates` folder. This is the path to our twig template.
- As a second argument we pass an array, containing `DefaultController` as well as `controller_name`. Those are our parameters that can be used in our template. More on that later.

Before we go ahead it's vital to understand the created code.

When we look into our controller we can see that there is the function `index`. Before it, in the comments, are the so called [Annotations](https://symfony.com/doc/current/page_creation.html#annotation-routes).

```php=10
/**
 * @Route("/default", name="default")
 */
public function index()
{
    return $this->render('default/index.html.twig', [
        'controller_name' => 'DefaultController',
    ]);
}
```

What can we see in here? We can see that our route is `/default`

Given your development sever is running at `localhost:8000` we can test this by opening `localhost:8000/default`. Inside of the index function is the expression `return $this->render`. This means that we generate the HTML content from the twig template. The square brackets at the end of this functions we pass arguments to the template. Those are passed as an array, indicated by the square brackets. 

At the moment we only pass the argument `controller_name` with the value `'DefaultController'`. In the next step we will learn how to use those arguments passed.

## Step 3 - What the template?

As mentioned in part one, setup, Symfony uses [Twig](https://twig.symfony.com/) as a template engine. Such a template engine comes in handy because we can:
- reuse parts of it
- it doesn't clutter our PHP code
- It's easier to split the work for the backend / frontend

For now we will have a look at the `templates/default/index.html.twig` . In here we notice a couple of things:

- `{% extends 'base.html.twig' %}`: This indicates that all of our content is based on the `base.html.twig`. In here we would include our CSS and JS. Navabars would preferably be defined here to. 
- `{% block body %} [...]{% endblock %}`: In our base template we define several blocks, that act like placeholders. If use a block previously defined in another template its overwritten. By utilizing that we may define default values, for example in the title. 
- `<h1>Hello {{ controller_name }}! ✅</h1>`: This is a basic h1 tag. The most interesting part in here is the `{{ controller_name }}`. If we remember, in the previous section we passed an argument tot the template with the same name.

<details>
    <summary>(Click to expand) full index.html.twig</summary>

```html=1
{% extends 'base.html.twig' %}

{% block title %}Hello DefaultController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! ✅</h1>

    This friendly message is coming from:
    <ul>
        <li>Your controller at <code><a href="{{ '/home/user/Documents/hetzneronline/a-basic-guide-to-php-symfony/src/Controller/DefaultController.php'|file_link(0) }}">src/Controller/DefaultController.php</a></code></li>
        <li>Your template at <code><a href="{{ '/home/user/Documents/hetzneronline/a-basic-guide-to-php-symfony/templates/default/index.html.twig'|file_link(0) }}">templates/default/index.html.twig</a></code></li>
    </ul>
</div>
{% endblock %}
```
	
</details>

To consolidate our knowledge there is a simple task we can do now:

- Pass the argument `owner_name` to the template. Print it out as a `h2` tag under the `h1`. Feel free to add a short description.
- Given the information that there is a `stylesheets` block in the base template, go ahead and make the background of the body `lightgreen`. Note: you have to write the style tags out to. The stylesheets block is not surrounded with them by default.

<details>
    <summary>(Click to expand) Solution</summary>

`DefaultController.php`

```php=8
 class DefaultController extends AbstractController
     {
         return $this->render('default/index.html.twig', [
             'controller_name' => 'DefaultController',
+            'owner_name' => 'Moritz',
         ]);
     }
 }
```

`index.html.twig`

```twig=1
 {% extends 'base.html.twig' %}
 
 {% block title %}Hello DefaultController!{% endblock %}
+{% block stylesheets %}
+<style>
+body {
+    background-color: lightgreen;
+}
+</style> {% endblock %}
 
 {% block body %}
 <style>
```
	 
```twig=17
 <div class="example-wrapper">
     <h1>Hello {{ controller_name }}! ✅</h1>
+    <h2>This application was braught to you by {{ owner_name }}</h2>
 
     This friendly message is coming from:
     <ul>
```

</details>
     
We no know how templates work and how we pass arguments to them. For a more in depth documentation of the functions twig offers please refer to the [Twig documentation](https://twig.symfony.com/doc/2.x/).

## Step 4 - Creating our first custom routes
	 
In order to take advantage of Symfonys Routing feature it's the next step to create our first custom routes. For this we will create a infamous hello world page. This simple task consists of two parts:

- Add the route `/default/hello`
- Create a `hello.html.twig` template

We also want to pass who to greet and display it in the template.

At first we will need to a route. For now we will stick to our `DefaultController`. First we will, using annotations, define our route. This will, as mentioned, be `/default/hello`. Therefore, our annotaion will look like this:
```php
/**
 * @Route("/default/hello", name="default_hello")
 */
```

Right below it we will put the function `hello`. It will handle the rendering of our template and pass the `who` parameter to the template. In our case we want to greet the world so this parameter will have the value `World`.
```php
public function hello()
{
    return $this->render('default/hello.html.twig', [
        'who' => 'World',
    ]);
}
```

Our template isn't complex either. We only need to expand the base.html.twig, set the title and print the same out in a `h1` block. Because we, programmers, are lazy by nature we only want to write the title once. For this we can use the [set function of twig](https://twig.symfony.com/doc/2.x/tags/set.html). We will set the value of the `title` variable to Hello + who we want to greet + an exclamation mark(!). Those strings are concatenated by using the tilde (~).
```twig
{% set title = 'Hello ' ~ who ~ '!' %}
```

This variable we can use in our title block or in our body block:
```twig
{% block title %}{{ title }}{% endblock %}

{% block body %}
    <h1>{{ title }}</h1>
{% endblock %}
```

<details>
    <summary>(Click to expand) Full code</summary>

`templates/default/hello.html.twig`

```twig=1
{% extends "base.html.twig" %}

{% set title = 'Hello ' ~ who ~ '!' %}

{% block title %}{{ title }}{% endblock %}

{% block body %}
    <h1>{{ title }}</h1>
{% endblock %}
```

`DefaultController.php`
```php=17
             'owner_name' => 'Moritz',
         ]);
     }
+
+    /**
+     * @Route("/default/hello", name="default_hello")
+     */
+    public function hello()
+    {
+        return $this->render('default/hello.html.twig', [
+            'who' => 'World',
+        ]);
+    }
 }
```

We now have leaarned how simple it is to create a custom route by hand, it is realy simple. In the next step we will learn why the concept of routes is so powerfull and how to pass arguments with our routes.

</details>

## Step 5 - Passing arguments with our routes

We all have seen it, for example in a online shop: For example the name or ID of a product is part of the url. In some cases those parameters may be passed using so called GET parameters (e.g. `?item=674`). In other cases you may see something like this: `/item/674` in your URL bar. This is exactly what we are going to create. We are going to:

- outsource our hello world into a `HelloController`
- rename the route `/default/hello` to `/hello/World` where the `World` part is modifiably by the user and is passed to the template

We create our new controller by using the command `php bin/console make:controller HelloController`. We have alraedy took a look at this in Step 1. Beacuse we will no longer need it we can safely remove the `/default/hello` route and move the `hello.html.twig` template from `templates/default/hello.html.twig` to `templates/hello/index.html.twig`. For this we can safely remove the old `hello/index.html.twig`.

In oreder to access those URL Parameters in our controller, we need to define the placeholder. We indicate those by curly brackets, `{}`. Inside of those curly brackets is the name for our parameter. Given our route is `/hello/{who}` Given our previous example of `/hello/World` our who parameter is `World`. This is passed like a function parameter to our function inside the controller. This means we can now use it like any other variable, and we can pass it to our template.

As a result from this, we now have this code:

```php=10
/**
 * @Route("/hello/{who}", name="hello")
 */
public function index($who)
{
    return $this->render('hello/index.html.twig', [
        'who' => $who,
    ]);
}
```

Please note: the name of the placeholder must match the name of the function parameter!

Now we can go ahead and open [localhost:8000/hello/World](http://localhost:8000/hello/World). We should be greeted by a friendly `Hello World`. But that's just what we had before. But what if we want to greet Hetzner as a thank you for this community space? Well, just replace the `World` with `Hetzner` and we're greeted by a `Hello Hetzner!`.

This is cool isn't it? But what is when we open `/hello/`? Now we are greeted by a `No route found for "GET /hello/": HTTP 404 Not Found`. This is neither our template nor even enaything nice at all. But what can we do about it? We can define default values! And the best about it, we can do it in the same way we would do it in PHP.

We just change the function from `public function index($who)` to `public function index($who = "World")`! As mentioned, this is the exact same way set the default parameter for a function in php, that's because we do exactly that!

If you want to do more reading on route parameters, for example how to verify them by using regular expressions, the [Symfony Documentation on Routing](https://symfony.com/doc/current/routing.html) is great.

## Step 6 - Linking and redirecting

You may have noticed that we set a name for each and every of our rutes. But we havn't used them yet, so it's reasonable to assume that it's unneeded overhead. First of all, it's not needed! We do not have to write the `name="default"` part of the annotation. But why are we doing it anyways? Because you can do powerfull things with it!

There are two main features we will take a look at for now. Those beeing redirecitng and linking.

### Redirecting

Given we want to redirect our users from `/` to `/hello/Guest` in order to greet our new visitors.

In normal PHP we would ot it like this:
```
header('Location: /hello/Guest');
```

But this sucks, we can do this way easier using Symfony! Inside of our function responsible for generating the content we can just type:

```php
return $this->redirectToRoute('hello', [
    'who' => 'Guest'
]);
```

The first parameter we pass to our function is the name of the route. In our case `hello`. As a second parameter we pass the parameters we want to pass to our route. Those are passed as an array. As you can see, here we pass the previously defined `who` argument with the value `Guest`.

Now go ahead and:

- create the `/` route inside of our DefaultController
- Redirect from `/` to `/hello/Guest`

<details>
    <summary>(Click to expand) Full code</summary>

```php=8
 class DefaultController extends AbstractController
 {
     /**
-     * @Route("/default", name="default")
+     * @Route("/", name="index")
      */
     public function index()
+    {
+        return $this->redirectToRoute('hello', [
+            'who' => 'Guest'
+        ]);
+    }
+
+    /**
+     * @Route("/default", name="default")
+     */
+    public function default()
```

While redirecting this way is a bit more code, but it saves us if we for example change routes. Given you changed `/hello/{who}` to `/h/{who}` we would have to change all the redirects and links, but aslong as we don't change the route name we won't have to change anything.

</details>

### Linking

Inside of our twig template, it is super easy to generate say the contents for an `a href`. There are two twig functions we are going to have a look at:

- `path`
- `url`

The first one we mostly use for linking on the website while because it only generates the relativ URL. So it spits out the `/hello/Guest`. While this is perfectly fine when the user is already on our website. But when we want to offer users a share link or anythink like this, it isn't thesable to only have the relative path. the `url` function is used when you want to include the url in the output. While we can accomplish the function of both with the other command to, it's just an argument, its way clearer when we stick to `path` for on site linking and `url` for anything that comes from of-site.

What we are going to do is:

- link from `/default/` to `/hello/You`
- Show the user a sharable url on `/hello/{who}`

For the first thing we are simply going to add a line inside of our `templates/default/index.html.twig`. Since this will be a HTML Hyperlink, we are going to use the `a` tag.

```twig=25
<li><a href="{{ path('hello', {'who': 'You'}) }}">Hello You!</a></li>
```

We pass two parameters to our `path` function, the same as when we redirect. At first we are passing the route name and as a seconds the route parameters.

To show the users a sharable link on the hello page, we are just going to add the following lines:

```twig=9
<br>
<p>Share this:</p>
<a href="{{ url('hello', {'who': who}) }}">{{ url('hello', {'who': who}) }}</a>
```

Same syntax as the `path` function, but the result should be like this:

```html
<br>
<p>Share this:</p>
<a href="http://localhost:8000/hello/You">http://localhost:8000/hello/You</a>
```

<!---

Contributors's Certificate of Origin    
 
By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Moritz Fromm <git@moritz-fromm.de>

-->
